<!DOCTYPE html>
<html lang="en">
  <head>
    <title>FAQ - Hibernate OGM</title>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="" name="description">
    <meta content="Emmanuel Bernard" name="author">
    <link href="https://cdn.jsdelivr.net/npm/semantic-ui@2.2.14/dist/semantic.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/slick-carousel@1.7.1/slick/slick.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/slick-carousel@1.7.1/slick/slick-theme.css" rel="stylesheet">
    <link href="/stylesheets/styles.css?t=1546867569" rel="stylesheet">
    <!-- Defines the project favicon. Change these URLs to your specific project folder on static.jboss.org. -->
    <link href="https://static.jboss.org/hibernate/images/favicon.ico" rel="shortcut icon">
    <link href="https://static.jboss.org/hibernate/images/apple-touch-icon-144x144-precomposed.png" rel="apple-touch-icon-precomposed" sizes="144x144">
    <link href="https://static.jboss.org/hibernate/images/apple-touch-icon-114x114-precomposed.png" rel="apple-touch-icon-precomposed" sizes="114x114">
    <link href="https://static.jboss.org/hibernate/images/apple-touch-icon-72x72-precomposed.png" rel="apple-touch-icon-precomposed" sizes="72x72">
    <link href="https://static.jboss.org/hibernate/images/apple-touch-icon-precomposed.png" rel="apple-touch-icon-precomposed">
    <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/semantic-ui@2.2.14/dist/semantic.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/slick-carousel@1.7.1/slick/slick.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jquery-match-height@0.7.2/jquery.matchHeight.min.js"></script>
    <!-- Tabzilla does not support minification -->
    <script src="https://static.jboss.org/js/_jbossorg-tabzilla.js"></script>
  </head>
  <body class="pushable">
    <div class="ui vertical inverted sidebar left" id="mobile-menu">
      <div class="ui vertical fluid inverted text menu accordion">
        <div class="item">
          <a class="title">
            <i class="database grid icon"></i>
            <i class="dropdown icon"></i>
            <strong>ORM</strong>
          </a>
          <div class="content">
            <div class="menu internal-links">
              <a class="item" href="/orm/">
                <i class="grid home icon"></i>
                About
              </a>
              <a class="item" href="/orm/releases/">
                <i class="grid icon tags"></i>
                Releases
              </a>
              <a class="item" href="/orm/documentation/">
                <i class="folder grid icon open"></i>
                Documentation
              </a>
              <a class="item" href="/orm/books/">
                <i class="book grid icon"></i>
                Books
              </a>
              <a class="item" href="https://github.com/hibernate/hibernate-orm/wiki/Migration-Guides">
                <i class="grid icon share"></i>
                Migration guides
              </a>
              <a class="item" href="https://github.com/hibernate/hibernate-orm/wiki/Roadmap">
                <i class="grid icon road"></i>
                Roadmap
              </a>
              <a class="item" href="/orm/tooling/">
                <i class="grid icon wrench"></i>
                Tooling
              </a>
              <a class="item" href="/orm/envers/">
                <i class="grid icon time"></i>
                Envers
              </a>
              <a class="item" href="/orm/contribute/">
                <i class="grid icon users"></i>
                Contribute
              </a>
              <a class="item" href="/orm/support/">
                <i class="doctor grid icon"></i>
                Paid support
              </a>
              <a class="item" href="/orm/faq/">
                <i class="circle grid help icon"></i>
                FAQ
              </a>
            </div>
            <div class="menu external-links">
              <a class="item" href="https://github.com/hibernate/hibernate-orm">
                <i class="code grid icon"></i>
                Source code
              </a>
              <a class="item" href="https://hibernate.atlassian.net/browse/HHH">
                <i class="bug grid icon"></i>
                Issue tracker
              </a>
              <a class="item" href="https://access.redhat.com/security/team/contact/">
                <i class="grid icon lock"></i>
                Security issue
              </a>
              <a class="item" href="https://discourse.hibernate.org/c/hibernate-orm">
                <i class="comments grid icon"></i>
                Forum
              </a>
              <a class="item" href="https://community.jboss.org/en/hibernate">
                <i class="edit grid icon"></i>
                Wiki
              </a>
              <a class="item" href="http://ci.hibernate.org/">
                <i class="grid icon treatment"></i>
                CI
              </a>
            </div>
          </div>
        </div>
        <div class="item">
          <a class="title">
            <i class="grid icon search"></i>
            <i class="dropdown icon"></i>
            <strong>Search</strong>
          </a>
          <div class="content">
            <div class="menu internal-links">
              <a class="item" href="/search/">
                <i class="grid home icon"></i>
                About
              </a>
              <a class="item" href="/search/releases/">
                <i class="grid icon tags"></i>
                Releases
              </a>
              <a class="item" href="/search/documentation/">
                <i class="book grid icon"></i>
                Documentation
              </a>
              <a class="item" href="/search/roadmap/">
                <i class="grid icon road"></i>
                Roadmap
              </a>
              <a class="item" href="/search/contribute/">
                <i class="grid icon users"></i>
                Contribute
              </a>
              <a class="item" href="/search/tooling/">
                <i class="grid icon wrench"></i>
                Tooling
              </a>
              <a class="item" href="/search/support/">
                <i class="doctor grid icon"></i>
                Paid support
              </a>
              <a class="item" href="/search/faq/">
                <i class="circle grid help icon"></i>
                FAQ
              </a>
            </div>
            <div class="menu external-links">
              <a class="item" href="https://github.com/hibernate/hibernate-orm">
                <i class="code grid icon"></i>
                Source code
              </a>
              <a class="item" href="https://hibernate.atlassian.net/browse/HHH">
                <i class="bug grid icon"></i>
                Issue tracker
              </a>
              <a class="item" href="https://access.redhat.com/security/team/contact/">
                <i class="grid icon lock"></i>
                Security issue
              </a>
              <a class="item" href="https://discourse.hibernate.org/c/hibernate-orm">
                <i class="comments grid icon"></i>
                Forum
              </a>
              <a class="item" href="https://community.jboss.org/en/hibernate">
                <i class="edit grid icon"></i>
                Wiki
              </a>
              <a class="item" href="http://ci.hibernate.org/">
                <i class="grid icon treatment"></i>
                CI
              </a>
            </div>
          </div>
        </div>
        <div class="item">
          <a class="title">
            <i class="box checkmark grid icon"></i>
            <i class="dropdown icon"></i>
            <strong>Validator</strong>
          </a>
          <div class="content">
            <div class="menu internal-links">
              <a class="item" href="/validator/">
                <i class="grid home icon"></i>
                About
              </a>
              <a class="item" href="/validator/releases/">
                <i class="grid icon tags"></i>
                Releases
              </a>
              <a class="item" href="/validator/documentation/">
                <i class="book grid icon"></i>
                Documentation
              </a>
              <a class="item" href="/validator/roadmap/">
                <i class="grid icon road"></i>
                Roadmap
              </a>
              <a class="item" href="/validator/contribute/">
                <i class="grid icon users"></i>
                Contribute
              </a>
              <a class="item" href="/validator/tooling/">
                <i class="grid icon wrench"></i>
                Tooling
              </a>
              <a class="item" href="/validator/support/">
                <i class="doctor grid icon"></i>
                Paid support
              </a>
              <a class="item" href="/validator/faq/">
                <i class="circle grid help icon"></i>
                FAQ
              </a>
            </div>
            <div class="menu external-links">
              <a class="item" href="https://github.com/hibernate/hibernate-orm">
                <i class="code grid icon"></i>
                Source code
              </a>
              <a class="item" href="https://hibernate.atlassian.net/browse/HHH">
                <i class="bug grid icon"></i>
                Issue tracker
              </a>
              <a class="item" href="https://access.redhat.com/security/team/contact/">
                <i class="grid icon lock"></i>
                Security issue
              </a>
              <a class="item" href="https://discourse.hibernate.org/c/hibernate-orm">
                <i class="comments grid icon"></i>
                Forum
              </a>
              <a class="item" href="https://community.jboss.org/en/hibernate">
                <i class="edit grid icon"></i>
                Wiki
              </a>
              <a class="item" href="http://ci.hibernate.org/">
                <i class="grid icon treatment"></i>
                CI
              </a>
            </div>
          </div>
        </div>
        <div class="item">
          <a class="active title">
            <i class="grid icon sitemap"></i>
            <i class="dropdown icon"></i>
            <strong>OGM</strong>
          </a>
          <div class="active content">
            <div class="menu internal-links">
              <a class="item" href="/ogm/">
                <i class="grid home icon"></i>
                About
              </a>
              <a class="item" href="/ogm/releases/">
                <i class="grid icon tags"></i>
                Releases
              </a>
              <a class="item" href="/ogm/documentation/">
                <i class="book grid icon"></i>
                Documentation
              </a>
              <a class="item" href="/ogm/roadmap/">
                <i class="grid icon road"></i>
                Roadmap
              </a>
              <a class="item" href="/ogm/contribute/">
                <i class="grid icon users"></i>
                Contribute
              </a>
              <a class="item" href="/ogm/support/">
                <i class="doctor grid icon"></i>
                Paid support
              </a>
              <a class="active item" href="/ogm/faq/">
                <i class="circle grid help icon"></i>
                FAQ
              </a>
            </div>
            <div class="menu external-links">
              <a class="item" href="https://github.com/hibernate/hibernate-orm">
                <i class="code grid icon"></i>
                Source code
              </a>
              <a class="item" href="https://hibernate.atlassian.net/browse/HHH">
                <i class="bug grid icon"></i>
                Issue tracker
              </a>
              <a class="item" href="https://access.redhat.com/security/team/contact/">
                <i class="grid icon lock"></i>
                Security issue
              </a>
              <a class="item" href="https://discourse.hibernate.org/c/hibernate-orm">
                <i class="comments grid icon"></i>
                Forum
              </a>
              <a class="item" href="https://community.jboss.org/en/hibernate">
                <i class="edit grid icon"></i>
                Wiki
              </a>
              <a class="item" href="http://ci.hibernate.org/">
                <i class="grid icon treatment"></i>
                CI
              </a>
            </div>
          </div>
        </div>
        <div class="item">
          <a class="title">
            <i class="grid icon wrench"></i>
            <i class="dropdown icon"></i>
            <strong>Tools</strong>
          </a>
          <div class="content">
            <div class="menu internal-links">
              <a class="item" href="/tools/">
                <i class="grid home icon"></i>
                About
              </a>
            </div>
            <div class="menu external-links">
              <a class="item" href="https://github.com/hibernate/hibernate-orm">
                <i class="code grid icon"></i>
                Source code
              </a>
              <a class="item" href="https://hibernate.atlassian.net/browse/HHH">
                <i class="bug grid icon"></i>
                Issue tracker
              </a>
              <a class="item" href="https://access.redhat.com/security/team/contact/">
                <i class="grid icon lock"></i>
                Security issue
              </a>
              <a class="item" href="https://discourse.hibernate.org/c/hibernate-orm">
                <i class="comments grid icon"></i>
                Forum
              </a>
              <a class="item" href="https://community.jboss.org/en/hibernate">
                <i class="edit grid icon"></i>
                Wiki
              </a>
              <a class="item" href="http://ci.hibernate.org/">
                <i class="grid icon treatment"></i>
                CI
              </a>
            </div>
          </div>
        </div>
        <a class="item" href="/others/">
          Others
        </a>
        <div class="item">
          <a class="title">
            <i class="grid icon users"></i>
            <i class="dropdown icon"></i>
            <strong>Community</strong>
          </a>
          <div class="content">
            <div class="menu external-links">
              <a class="item" href="/community/">
                <i class="grid icon users"></i>
                Community
              </a>
              <a class="item" href="/community/contributors/orm/">
                <i class="grid icon database"></i>
                Contributors to ORM
              </a>
              <a class="item" href="/community/contributors/search/">
                <i class="grid icon search"></i>
                Contributors to Search
              </a>
              <a class="item" href="/community/contributors/validator/">
                <i class="grid icon checkmark box"></i>
                Contributors to Validator
              </a>
              <a class="item" href="/community/contributors/ogm/">
                <i class="grid icon sitemap"></i>
                Contributors to OGM
              </a>
              <a class="item" href="/community/corporate-contributors/">
                <i class="grid icon building outline"></i>
                Corporate contributors
              </a>
              <a class="item" href="/community/license/">
                <i class="grid icon legal"></i>
                Licenses
              </a>
            </div>
          </div>
        </div>
        <a class="item" href="http://in.relation.to/">
          Blog
        </a>
        <a class="item" href="https://discourse.hibernate.org/">
          Forums
        </a>
        <a class="item" href="https://twitter.com/hibernate/">
          <i class="icon twitter"></i>
          Follow us
        </a>
      </div>
    </div>
    <div class="pusher">
      <div class="mobile-menu-button-bar mobile only print hidden">
        <a class="item" id="mobile-menu-toggle">
          <i class="sidebar icon"></i>
          Menu
        </a>
      </div>
      <!-- begin accesibility skip to top -->
      <ul class="sr-only">
        <li>
          <a accesskey="n" href="#nav" title="Skip to navigation">Skip to navigation</a>
        </li>
        <li>
          <a accesskey="c" href="#content" title="Skip to content">Skip to content</a>
        </li>
      </ul>
      <div class="ui container banner">
        <div class="logo">
          <a href="/">
            <img alt="Hibernate" height="53" src="/images/hibernate-logo.svg" width="200">
          </a>
        </div>
        <!-- Red Hat link at the top -->
        <div class="dropup mobile hidden" id="redhat-button">
          <div class="tabnav-closed" href="#" id="tab">Red Hat</div>
        </div>
        <div class="clearfix"></div>
        <div class="ui stackable menu mobile hidden print hidden" id="nav">
          <a class="item" href="/orm/">ORM</a>
          <a class="item" href="/search/">Search</a>
          <a class="item" href="/validator/">Validator</a>
          <a class="active item" href="/ogm/">OGM</a>
          <a class="item" href="/tools/">Tools</a>
          <a class="item" href="/others/">Others</a>
          <div class="right menu">
            <a class="item" href="http://in.relation.to/">Blog</a>
            <a class="item" href="https://discourse.hibernate.org/">Forums</a>
            <a class="item" href="/community/">Community</a>
            <a class="item" href="https://twitter.com/hibernate/">
              <i class="twitter icon"></i>
              Follow us
            </a>
          </div>
        </div>
      </div>
      <script>
        var displayed_series = [];
        displayed_series.push('5.4');
        displayed_series.push('5.3');
        displayed_series.push('5.2');
      </script>
      <div class="jumbotron small">
        <div class="ui container">
          <div class="ui grid stackable">
            <div class="column row">
              <div class="column twelve wide middle aligned">
                <h1>
                  <span>
                    Hibernate OGM
                  </span>
                </h1>
                <h2>
                  <span>
                    FAQ
                  </span>
                </h2>
              </div>
              <div class="column four wide middle aligned">
                
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <div class="ui container page-content">
        <div class="ui stackable grid">
          <div class="column three wide computer only print hidden">
            <div class="ui fluid vertical menu">
              <a class="item" href="..">
                <i class="grid home icon"></i>
                About
              </a>
              <div class="dropdown item link ui">
                Releases
                <i class="icon dropdown"></i>
                <div class="menu">
                  <a class="item" href="../releases">
                    Overview
                  </a>
                  <a class="item" href="../releases/5.4">
                    5.4
                    &nbsp;&nbsp;
                    <span class="ui label green">latest stable</span>
                  </a>
                  <a class="item" href="../releases/5.3">
                    5.3
                  </a>
                  <a class="item" href="../releases/5.2">
                    5.2
                  </a>
                </div>
              </div>
              <a class="item" href="../documentation">
                <i class="book grid icon"></i>
                Documentation
              </a>
              <a class="item" href="../roadmap">
                <i class="grid icon road"></i>
                Roadmap
              </a>
              <a class="item" href="../contribute">
                <i class="grid icon users"></i>
                Contribute
              </a>
              <a class="item" href="../support">
                <i class="doctor grid icon"></i>
                Paid support
              </a>
              <a class="item selected" href=".">
                <i class="circle grid help icon"></i>
                FAQ
              </a>
            </div>
            <div class="ui fluid vertical menu">
              <a class="item" href="https://github.com/hibernate/hibernate-ogm">
                <i class="code grid icon"></i>
                Source code
              </a>
              <a class="item" href="https://hibernate.atlassian.net/browse/OGM">
                <i class="bug grid icon"></i>
                Issue tracker
              </a>
              <a class="item" href="https://access.redhat.com/security/team/contact/">
                <i class="grid icon lock"></i>
                Security issue
              </a>
              <a class="item" href="https://discourse.hibernate.org/c/hibernate-ogm">
                <i class="comments grid icon"></i>
                Forum
              </a>
              <a class="item" href="http://ci.hibernate.org/job/hibernate-ogm-master/">
                <i class="grid icon treatment"></i>
                CI
              </a>
              <a class="item" href="https://community.jboss.org/en/hibernate/ogm">
                <i class="edit grid icon"></i>
                Wiki
              </a>
            </div>
            <hr>
            <div class="license">
              Released under the
              <a href="http://www.gnu.org/licenses/lgpl.html">LGPL</a>
            </div>
          </div>
          <div class="column thirteen wide computer sixteen wide mobile">
            <div class="content" id="content">
              <div id="preamble">
              <div class="sectionbody">
              <div class="paragraph">
              <p>You&#8217;ve got a question burning you? We might have the answer for you.</p>
              </div>
              </div>
              <div id="toc" class="toc">
              <div id="toctitle">Questions</div>
              <ul class="sectlevel1">
              <li><a href="#design-for-hibernate-ogm">Design for Hibernate OGM</a>
              <ul class="sectlevel2">
              <li><a href="#is-jpa-a-good-fit-for-nosql">Is JPA a good fit for NoSQL?</a></li>
              <li><a href="#do-you-support-both-relational-and-nosql-databases">Do you support both relational and NoSQL databases?</a></li>
              </ul>
              </li>
              <li><a href="#using-hibernate-ogm">Using Hibernate OGM</a>
              <ul class="sectlevel2">
              <li><a href="#how-does-hibernate-ogm-handle-transactions">How does Hibernate OGM handle transactions?</a></li>
              <li><a href="#how-does-hibernate-ogm-deal-with-failures-upon-transaction-commit">How does Hibernate OGM deal with failures upon transaction commit?</a></li>
              <li><a href="#in-neo4j-i-get-a-code-org-neo4j-graphdb-notintransactionexception-code">In Neo4j, I get a <code>org.neo4j.graphdb.NotInTransactionException</code></a></li>
              <li><a href="#using-mongodb-i-get-a-code-java-lang-nosuchfielderror-errors_ignored-code-exception">Using MongoDB, I get a <code>java.lang.NoSuchFieldError: ERRORS_IGNORED</code> exception</a></li>
              <li><a href="#my-changes-are-not-applied-to-the-backend-where-is-the-bug">My changes are not applied to the backend, where is the bug?</a></li>
              <li><a href="#how-can-i-query">How can I query?</a></li>
              <li><a href="#when-using-mongodb-native-queries-i-get-a-code-com-mongodb-util-jsonparseexception-code">When using MongoDB native queries, I get a <code>com.mongodb.util.JSONParseException</code></a></li>
              <li><a href="#when-using-hibernate-ogm-on-top-of-wildfly-i-m-getting-a-jndiexception-what-s-wrong">When using Hibernate OGM on top of WildFly, I&#8217;m getting a JndiException. What&#8217;s wrong?</a></li>
              <li><a href="#why-do-i-get-a-code-java-lang-noclassdeffounderror-org-hibernate-search-batchindexing-spi-massindexerfactory-code">Why do I get a <code>java.lang.NoClassDefFoundError: org/hibernate/search/batchindexing/spi/MassIndexerFactory</code>?</a></li>
              </ul>
              </li>
              <li><a href="#developers-of-hibernate-ogm">Developers of Hibernate OGM</a>
              <ul class="sectlevel2">
              <li><a href="#how-to-skip-some-tests-while-in-the-development-of-a-new-dialect">How to skip some tests while in the development of a new Dialect?</a></li>
              </ul>
              </li>
              </ul>
              </div>
              </div>
              <div class="sect1">
              <h2 id="design-for-hibernate-ogm"><a class="anchor" href="#design-for-hibernate-ogm"></a>Design for Hibernate OGM</h2>
              <div class="sectionbody">
              <div class="sect2">
              <h3 id="is-jpa-a-good-fit-for-nosql"><a class="anchor" href="#is-jpa-a-good-fit-for-nosql"></a>Is JPA a good fit for NoSQL?</h3>
              <div class="paragraph">
              <p>That&#8217;s the million dollars question but in essence, yes we think it is a good fit.
              Here is quickly a few key reasons why JPA makes sense.</p>
              </div>
              <div class="dlist">
              <dl>
              <dt class="hdlist1">Benefits of the abstraction level</dt>
              <dd>
              <p>JPA abstracts persistence at the object level, leaving room for a lot of tricks and optimizations.
              To name a few, think about <em>declarative data / schema migration, declarative denormalization, polyglot persistence</em>.
              Polyglot persistence is particularly interesting: storing data in several datastores
              and use the best one for a specific read job.</p>
              <div class="paragraph">
              <p>Of course if your dataset is by nature non domain model centric, then Hibernate OGM is not for you.</p>
              </div>
              </dd>
              <dt class="hdlist1">Things just fit</dt>
              <dd>
              <p>While we were skeptic initially, most of the logical model of JPA fit.
              For example,
              an @Embeddable object or @ElementCollection nicely fit the document datastore approach of nesting related objects.</p>
              <div class="paragraph">
              <p>We work hard in Hibernate OGM to use the most natural mapping for a given data pattern
              and we offer you the ability to override that if needed.</p>
              </div>
              </dd>
              <dt class="hdlist1">Known semantic and APIs</dt>
              <dd>
              <p>For better or worse, JPA is known to Java developers.
              They are familiar with its API and semantic.
              That&#8217;s a huge win compared to learning a specific lower level API or worse some pseudo-ORM level API.
              And we support both HQL and native backend queries!</p>
              </dd>
              <dt class="hdlist1">Late backend choice</dt>
              <dd>
              <p>Choosing an NoSQL engine is not trivial.
              Having the freedom to switch backends without having to rewrite all of your data layer is certainly something to appreciate.</p>
              </dd>
              </dl>
              </div>
              </div>
              <div class="sect2">
              <h3 id="do-you-support-both-relational-and-nosql-databases"><a class="anchor" href="#do-you-support-both-relational-and-nosql-databases"></a>Do you support both relational and NoSQL databases?</h3>
              <div class="paragraph">
              <p>Yes.
              You can start Hibernate ORM and Hibernate OGM in the same application.
              You can even start several Hibernate OGM instances in the same application.
              Just make sure that you do not share the same entities between persistence units
              and that there are no associations between two entities handled by different persistence unit.</p>
              </div>
              <div class="listingblock">
              <div class="content">
              <pre class="CodeRay highlight"><code data-lang="XML"><span style="color:#579">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>&#x000A;<span style="color:#070;font-weight:bold">&lt;persistence</span> <span style="color:#b48">xmlns</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">http://java.sun.com/xml/ns/persistence</span><span style="color:#710">&quot;</span></span>&#x000A;             <span style="color:#b48">xmlns:xsi</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">http://www.w3.org/2001/XMLSchema-instance</span><span style="color:#710">&quot;</span></span>&#x000A;             <span style="color:#b48">xsi:schemaLocation</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd</span><span style="color:#710">&quot;</span></span>&#x000A;             <span style="color:#b48">version</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">2.0</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>&#x000A;    <span style="color:#070;font-weight:bold">&lt;persistence-unit</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">ogm-mongodb</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">transaction-type</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">JTA</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>&#x000A;        <span style="color:#070;font-weight:bold">&lt;provider&gt;</span>org.hibernate.ogm.jpa.HibernateOgmPersistence<span style="color:#070;font-weight:bold">&lt;/provider&gt;</span>&#x000A;        <span style="color:#070;font-weight:bold">&lt;exclude-unlisted-classes&gt;</span>true<span style="color:#070;font-weight:bold">&lt;/exclude-unlisted-classes&gt;</span>&#x000A;        <span style="color:#070;font-weight:bold">&lt;class&gt;</span>com.acme.domain.catalog.Catalog<span style="color:#070;font-weight:bold">&lt;/class&gt;</span>&#x000A;        <span style="color:#070;font-weight:bold">&lt;properties&gt;</span>&#x000A;            <span style="color:#070;font-weight:bold">&lt;property</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">hibernate.ogm.datastore.provider</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">value</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">mongodb</span><span style="color:#710">&quot;</span></span> <span style="color:#070;font-weight:bold">/&gt;</span>&#x000A;            <span style="color:#070;font-weight:bold">&lt;property</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">hibernate.ogm.datastore.database</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">value</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">catalog</span><span style="color:#710">&quot;</span></span> <span style="color:#070;font-weight:bold">/&gt;</span>&#x000A;        <span style="color:#070;font-weight:bold">&lt;/properties&gt;</span>&#x000A;    <span style="color:#070;font-weight:bold">&lt;/persistence-unit&gt;</span>&#x000A;    <span style="color:#070;font-weight:bold">&lt;persistence-unit</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">orm-oracle</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">transaction-type</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">JTA</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>&#x000A;        <span style="color:#070;font-weight:bold">&lt;datasource&gt;</span>some/db/Oracle<span style="color:#070;font-weight:bold">&lt;/datasource&gt;</span>&#x000A;        <span style="color:#070;font-weight:bold">&lt;exclude-unlisted-classes&gt;</span>true<span style="color:#070;font-weight:bold">&lt;/exclude-unlisted-classes&gt;</span>&#x000A;        <span style="color:#070;font-weight:bold">&lt;class&gt;</span>com.acme.domain.order.Order<span style="color:#070;font-weight:bold">&lt;/class&gt;</span>&#x000A;        <span style="color:#070;font-weight:bold">&lt;properties&gt;</span>&#x000A;            <span style="color:#070;font-weight:bold">&lt;property</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">hibernate.dialect</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">value</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">org.hibernate.dialect.OracleDialect</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>&#x000A;        <span style="color:#070;font-weight:bold">&lt;/properties&gt;</span>&#x000A;    <span style="color:#070;font-weight:bold">&lt;/persistence-unit&gt;</span>&#x000A;<span style="color:#070;font-weight:bold">&lt;/persistence&gt;</span></code></pre>
              </div>
              </div>
              <div class="paragraph">
              <p>However, you cannot put the same entities (or entities linked with associations)
              in both the relational and the NoSQL store.
              Or at least, Hibernate OGM does not do that for you yet.
              That is something we want to explore in the future.</p>
              </div>
              </div>
              </div>
              </div>
              <div class="sect1">
              <h2 id="using-hibernate-ogm"><a class="anchor" href="#using-hibernate-ogm"></a>Using Hibernate OGM</h2>
              <div class="sectionbody">
              <div class="sect2">
              <h3 id="how-does-hibernate-ogm-handle-transactions"><a class="anchor" href="#how-does-hibernate-ogm-handle-transactions"></a>How does Hibernate OGM handle transactions?</h3>
              <div class="paragraph">
              <p>Like Hibernate ORM, Hibernate OGM is orthogonal and agnostic to transactions,
              but integrates the flush event to them when possible.</p>
              </div>
              <div class="paragraph">
              <p>Make sure to demarcate your transaction either via your application container
              or via the Hibernate OGM transaction demarcation methods.
              The reference documentation details how to set up Hibernate OGM
              in various transaction environments.</p>
              </div>
              <div class="paragraph">
              <p>Note that even if your datastore does not support transactions,
              we recommend you use transaction demarcations with Hibernate OGM
              to trigger the flush operation transparently (on commit).
              But do not consider rollback as a possibility, this won&#8217;t work.</p>
              </div>
              </div>
              <div class="sect2">
              <h3 id="how-does-hibernate-ogm-deal-with-failures-upon-transaction-commit"><a class="anchor" href="#how-does-hibernate-ogm-deal-with-failures-upon-transaction-commit"></a>How does Hibernate OGM deal with failures upon transaction commit?</h3>
              <div class="paragraph">
              <p>If the backend is transactional (Infinispan, Neo4j), the transaction can be rolled back upon failures.
              The data store will be in the same state as before, just as you know it from relation databases.</p>
              </div>
              <div class="paragraph">
              <p>For non-transactional backends (e.g. MongoDB, CouchDB) some changes may already
              have been applied to the datastore if a failure occurs in the middle of a flush cycle.
              For such cases, Hibernate OGM provides an error handling and compensation API.
              This allows you to decide what to do upon failures during a flush (abort, continue) and gives you
              all the operations applied so far if a "rollback" is triggered.</p>
              </div>
              <div class="paragraph">
              <p>Check out the <a href="http://docs.jboss.org/hibernate/ogm/4.2/reference/en-US/html_single/#ogm-api-error-handler">reference guide</a>
              for the details. Note that this API is currently under development;
              If you have any ideas or requirements around it, please let us know and get in touch!</p>
              </div>
              </div>
              <div class="sect2">
              <h3 id="in-neo4j-i-get-a-code-org-neo4j-graphdb-notintransactionexception-code"><a class="anchor" href="#in-neo4j-i-get-a-code-org-neo4j-graphdb-notintransactionexception-code"></a>In Neo4j, I get a <code>org.neo4j.graphdb.NotInTransactionException</code></h3>
              <div class="paragraph">
              <p>Neo4j does require to run all operations within a transaction, even read-only operations.
              Make sure you demarcate your transactions either explicitly or via a container like Java EE or Spring.</p>
              </div>
              </div>
              <div class="sect2">
              <h3 id="using-mongodb-i-get-a-code-java-lang-nosuchfielderror-errors_ignored-code-exception"><a class="anchor" href="#using-mongodb-i-get-a-code-java-lang-nosuchfielderror-errors_ignored-code-exception"></a>Using MongoDB, I get a <code>java.lang.NoSuchFieldError: ERRORS_IGNORED</code> exception</h3>
              <div class="paragraph">
              <p>You are using MongoDB driver 3.x with Hibernate OGM 4.2.
              Hibernate OGM uses the MongoDB driver 2.13 at this stage.
              You shouldn&#8217;t see any feature loss and you can use this combination to access MongoDB 3 databases - I know that&#8217;s confusing.</p>
              </div>
              <div class="paragraph">
              <p>We plan to upgrade to MongoDB 3 in the near future, we have identified bugs that are being tackled by the Mongo team.</p>
              </div>
              </div>
              <div class="sect2">
              <h3 id="my-changes-are-not-applied-to-the-backend-where-is-the-bug"><a class="anchor" href="#my-changes-are-not-applied-to-the-backend-where-is-the-bug"></a>My changes are not applied to the backend, where is the bug?</h3>
              <div class="paragraph">
              <p>Most likely, you forgot to demarcate the transactions or manually call flush().</p>
              </div>
              <div class="paragraph">
              <p>Even if your datastore does not support transactions,
              we recommend you use transaction demarcations with Hibernate OGM
              to trigger the flush operation transparently (on commit).
              But do not consider rollback as a possibility, this won&#8217;t work.</p>
              </div>
              </div>
              <div class="sect2">
              <h3 id="how-can-i-query"><a class="anchor" href="#how-can-i-query"></a>How can I query?</h3>
              <div class="paragraph">
              <p>There are three main methods:</p>
              </div>
              <div class="ulist">
              <ul>
              <li>
              <p>using Hibernate Search as indexing engine and use full-text queries</p>
              </li>
              <li>
              <p>using JP-QL (we convert it into a native backend query)</p>
              </li>
              <li>
              <p>pass a native backend query and bind it to the entity</p>
              </li>
              </ul>
              </div>
              <div class="paragraph">
              <p>The reference documentation details the various options.</p>
              </div>
              </div>
              <div class="sect2">
              <h3 id="when-using-mongodb-native-queries-i-get-a-code-com-mongodb-util-jsonparseexception-code"><a class="anchor" href="#when-using-mongodb-native-queries-i-get-a-code-com-mongodb-util-jsonparseexception-code"></a>When using MongoDB native queries, I get a <code>com.mongodb.util.JSONParseException</code></h3>
              <div class="paragraph">
              <p>It&#8217;s probable that you are not using JSON&#8217;s strict mode.
              In particular, use quotes around your attributes.</p>
              </div>
              <div class="listingblock">
              <div class="content">
              <pre class="CodeRay highlight"><code>// not good&#x000A;String query = "db.Book.find({ author: 'smith' })";&#x000A;&#x000A;// good&#x000A;String query = "db.Book.find({ 'author': 'smith' })";</code></pre>
              </div>
              </div>
              </div>
              <div class="sect2">
              <h3 id="when-using-hibernate-ogm-on-top-of-wildfly-i-m-getting-a-jndiexception-what-s-wrong"><a class="anchor" href="#when-using-hibernate-ogm-on-top-of-wildfly-i-m-getting-a-jndiexception-what-s-wrong"></a>When using Hibernate OGM on top of WildFly, I&#8217;m getting a JndiException. What&#8217;s wrong?</h3>
              <div class="paragraph">
              <p>In case you&#8217;re are seeing a JndiException saying "Unable to lookup JNDI name [---PlaceHolderDSForOGM---]",
              your application likely cannot access the application server module(s) of Hibernate OGM.</p>
              </div>
              <div class="paragraph">
              <p>To change this, add the following line to the <em>META-INF/MANIFEST.MF</em> file of your archive
              (adapt it to match your chosen datastore):</p>
              </div>
              <div class="listingblock">
              <div class="content">
              <pre class="CodeRay highlight"><code>Dependencies: org.hibernate.ogm services, org.hibernate.ogm.mongodb services</code></pre>
              </div>
              </div>
              <div class="paragraph">
              <p>Alternatively, you can configure this via the descriptor <em>jboss-deployment-structure.xml</em>.
              See the <a href="https://docs.jboss.org/hibernate/ogm/4.1/reference/en-US/html_single/#ogm-configuration-jbossmodule">reference guide</a> to learn more.</p>
              </div>
              </div>
              <div class="sect2">
              <h3 id="why-do-i-get-a-code-java-lang-noclassdeffounderror-org-hibernate-search-batchindexing-spi-massindexerfactory-code"><a class="anchor" href="#why-do-i-get-a-code-java-lang-noclassdeffounderror-org-hibernate-search-batchindexing-spi-massindexerfactory-code"></a>Why do I get a <code>java.lang.NoClassDefFoundError: org/hibernate/search/batchindexing/spi/MassIndexerFactory</code>?</h3>
              <div class="paragraph">
              <p>This means that you need Hibernate Search on the classpath.
              You can add it via maven using the following coordinates:</p>
              </div>
              <div class="listingblock">
              <div class="content">
              <pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;dependency&gt;</span>&#x000A;    <span style="color:#070;font-weight:bold">&lt;groupId&gt;</span>org.hibernate<span style="color:#070;font-weight:bold">&lt;/groupId&gt;</span>&#x000A;    <span style="color:#070;font-weight:bold">&lt;artifactId&gt;</span>hibernate-search-orm<span style="color:#070;font-weight:bold">&lt;/artifactId&gt;</span>&#x000A;<span style="color:#070;font-weight:bold">&lt;/dependency&gt;</span></code></pre>
              </div>
              </div>
              <div class="paragraph">
              <p>You can include the right version using the BOM as describe in the
              <a href="https://docs.jboss.org/hibernate/stable/ogm/reference/en-US/html/ch02.html">getting started chapter of the documentation</a>.</p>
              </div>
              <div class="paragraph">
              <p>Hibernate Search is an optional dependency in OGM, you need to include it if you want to:</p>
              </div>
              <div class="ulist">
              <ul>
              <li>
              <p>index entities and run full-text queries;</p>
              </li>
              <li>
              <p>run HQL queries on datastores without a specific language query parser like Redis or Cassandra.</p>
              </li>
              </ul>
              </div>
              </div>
              </div>
              </div>
              <div class="sect1">
              <h2 id="developers-of-hibernate-ogm"><a class="anchor" href="#developers-of-hibernate-ogm"></a>Developers of Hibernate OGM</h2>
              <div class="sectionbody">
              <div class="sect2">
              <h3 id="how-to-skip-some-tests-while-in-the-development-of-a-new-dialect"><a class="anchor" href="#how-to-skip-some-tests-while-in-the-development-of-a-new-dialect"></a>How to skip some tests while in the development of a new Dialect?</h3>
              <div class="paragraph">
              <p>To skip all tests (from the core suite) for example related to associations,
              add this configuration to the Maven Surefire plugin:</p>
              </div>
              <div class="listingblock">
              <div class="content">
              <pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;excludes&gt;</span>&#x000A;    <span style="color:#070;font-weight:bold">&lt;exclude&gt;</span>**/associations/**/*Test.java<span style="color:#070;font-weight:bold">&lt;/exclude&gt;</span>&#x000A;<span style="color:#070;font-weight:bold">&lt;/excludes&gt;</span></code></pre>
              </div>
              </div>
              <div class="paragraph">
              <p>So the plugin configuration can look like:</p>
              </div>
              <div class="listingblock">
              <div class="title">pom.xml</div>
              <div class="content">
              <pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;build&gt;</span>&#x000A;    <span style="color:#070;font-weight:bold">&lt;plugins&gt;</span>&#x000A;        <span style="color:#070;font-weight:bold">&lt;plugin&gt;</span>&#x000A;            <span style="color:#070;font-weight:bold">&lt;groupId&gt;</span>org.apache.maven.plugins<span style="color:#070;font-weight:bold">&lt;/groupId&gt;</span>&#x000A;            <span style="color:#070;font-weight:bold">&lt;artifactId&gt;</span>maven-surefire-plugin<span style="color:#070;font-weight:bold">&lt;/artifactId&gt;</span>&#x000A;            <span style="color:#070;font-weight:bold">&lt;configuration&gt;</span>&#x000A;                <span style="color:#070;font-weight:bold">&lt;excludes&gt;</span>&#x000A;                    <span style="color:#070;font-weight:bold">&lt;exclude&gt;</span>**/associations/**/*Test.java<span style="color:#070;font-weight:bold">&lt;/exclude&gt;</span>&#x000A;                <span style="color:#070;font-weight:bold">&lt;/excludes&gt;</span>&#x000A;                <span style="color:#070;font-weight:bold">&lt;forkMode&gt;</span>once<span style="color:#070;font-weight:bold">&lt;/forkMode&gt;</span>&#x000A;            <span style="color:#070;font-weight:bold">&lt;/configuration&gt;</span>&#x000A;        <span style="color:#070;font-weight:bold">&lt;/plugin&gt;</span>&#x000A;    <span style="color:#070;font-weight:bold">&lt;/plugins&gt;</span>&#x000A;<span style="color:#070;font-weight:bold">&lt;/build&gt;</span></code></pre>
              </div>
              </div>
              </div>
              </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <script>
        $(document).ready(function() {
          $('.ui.menu .ui.dropdown').dropdown({ on: 'hover' });
        });
      </script>
      <div class="ui inverted vertical footer segment print hidden">
        <div class="ui container">
          <div class="ui stackable inverted divided equal height stackable grid">
            <div class="three wide column">
              <h4 class="ui inverted header">Projects</h4>
              <div class="ui inverted link list">
                <a class="item" href="../../orm" title="Hibernate ORM">Hibernate ORM</a>
                <a class="item" href="../../search" title="Search">Hibernate Search</a>
                <a class="item" href="../../validator" title="Hibernate Validator">Hibernate Validator</a>
                <a class="item" href=".." title="Hibernate OGM">Hibernate OGM</a>
                <a class="item" href="../../tools" title="Hibernate Tools">Hibernate Tools</a>
                <a class="item" href="../../others" title="Other projects">Other projects</a>
              </div>
            </div>
            <div class="three wide column">
              <h4 class="ui inverted header">Follow us</h4>
              <div class="ui inverted link list">
                <a class="item" href="http://in.relation.to/" title="Blog">Blog</a>
                <a class="item" href="https://twitter.com/hibernate/" title="Twitter">Twitter</a>
                <a class="item" href="https://plus.google.com/112681342290762837955/posts" title="Google+">Google+</a>
              </div>
            </div>
            <div class="five wide column">
              <h4 class="ui inverted header">Contribute and community</h4>
              <div class="ui inverted link list">
                <a class="item" href="../../community" title="Community resources">Community resources</a>
                <a class="item" href="https://github.com/hibernate/">Our GitHub organization</a>
                <a class="item" href="https://hibernate.atlassian.net/" title="Submit a bug">Submit a bug</a>
                <a class="item" href="https://discourse.hibernate.org/" title="Submit a bug">Our forums</a>
                <a class="item" href="https://access.redhat.com/security/team/contact/" title="Report a security issue">Report a security issue</a>
              </div>
            </div>
            <div class="five wide column sponsor">
              <div class="logo">
                <a href="https://www.redhat.com/">
                  <img height="48" src="../../images/redhat.png" title="Red Hat" width="216">
                </a>
              </div>
              <div class="logo">
                <a href="https://developers.redhat.com/">
                  <img height="48" src="../../images/redhat-developers.png" title="Red Hat Developers" width="216">
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
      <span class="back-to-top computer only">
        <a href="javascript: void(0)">Back to top</a>
      </span>
    </div>
    <script>
     (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
     
    ga('create', 'UA-45270411-1', 'auto');
    ga('send', 'pageview');
    
    </script>
    <script>
      $(function() {
        $('#mobile-menu').sidebar('setting', {
          transition: 'push'
        });
        $('#mobile-menu').sidebar('attach events', '#mobile-menu-toggle');
      
        $('.ui.accordion').accordion();
      
        renderTabzilla("Hibernate OGM", "ogm", true);
      
        $(window).scroll(function(e) {
          if($(this).scrollTop()>150){
            $('.back-to-top').fadeIn(1000); // Fading in the button on scroll after 150px
          }
          else {
            $('.back-to-top').fadeOut(500); // Fading out the button on scroll if less than 150px
          }
        });
      
          $('.back-to-top').click(function(e) {
            $('body, html').animate({scrollTop:0}, 800);
          });
        });
    </script>
  </body>
</html>
