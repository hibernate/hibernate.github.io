<!DOCTYPE html> <html lang="en"> <head> <title>Hibernate ORM Envers - Hibernate ORM</title> <meta charset="utf-8"> <meta content="width=device-width, initial-scale=1.0" name="viewport"> <meta content="" name="description"> <meta content="" name="author"> <link href="http://static.jboss.org/theme/css/bootstrap-community/2.3.1.3/bootstrap-community.min.css" media="screen" rel="stylesheet"> <link href="../../stylesheets/styles.css" media="screen" rel="stylesheet"> <!--[if lt IE 9]><script src="http://static.jboss.org/theme/js/libs/html5/pre3.6/html5.min.js"></script><![endif]--> <link href="http://static.jboss.org/images/hibernate/favicon.ico" rel="shortcut icon"> <link href="http://static.jboss.org/images/hibernate/apple-touch-icon-144x144-precomposed.png" rel="apple-touch-icon-precomposed" sizes="144x144"> <link href="http://static.jboss.org/images/hibernate/apple-touch-icon-114x114-precomposed.png" rel="apple-touch-icon-precomposed" sizes="114x114"> <link href="http://static.jboss.org/images/hibernate/apple-touch-icon-72x72-precomposed.png" rel="apple-touch-icon-precomposed" sizes="72x72"> <link href="http://static.jboss.org/images/hibernate/apple-touch-icon-precomposed.png" rel="apple-touch-icon-precomposed"> <style>
      @media (min-width: 980px) {
        .banner { background-image: url(http://static.jboss.org/images/hibernate/hibernate-banner-1180px.png); height: 110px;  }
      }
      @media (max-width: 979px) {
        .banner { background-image: url(http://static.jboss.org/images/hibernate/hibernate-logo.png); background-repeat:no-repeat; height: 60px; }
      }
      @media (max-width: 650px) {
        .banner { width: 200px; margin: 0px auto; }
      }
    </style> <script src="http://static.jboss.org/theme/js/libs/jquery/jquery-1.9.1.min.js"></script> </head> <body> <div id="subproject"> <ul class="visuallyhidden" id="top"> <li> <a accesskey="n" href="#nav" title="Skip to navigation">Skip to navigation</a> </li> <li> <a accesskey="c" href="#page" title="Skip to content">Skip to content</a> </li> </ul> <div class="container" id="content"> <div id="logobar"> <div class="dropup"> <a class="tabnav-closed" href="https://www.jboss.org" id="tab">Red Hat</a> <script>
              window.addEventListener('load', function() { renderTabzilla("Hibernate ORM","orm") }, false);
            </script> </div> <a href="/"> <img src="http://static.jboss.org/hibernate/images/hibernate_logo_whitebkg_200px.png"> </a> </div> <div class="navbar navbar-inverse"> <div class="navbar-inner"> <a class="btn btn-navbar" data-target=".nav-collapse" data-toggle="collapse"> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </a> <div class="nav-collapse collapse"> <ul class="nav pull-left"> <li class="active"><a href="/orm/">ORM</a></li> <li class=""><a href="/search/">Search</a></li> <li class=""><a href="/validator/">Validator</a></li> <li class=""><a href="/ogm/">OGM</a></li> <li class=""><a href="/tools/">Tools</a></li> <li class=""><a href="/others/">Others</a></li> </ul> <ul class="nav pull-right"> <li><a href="http://in.relation.to">Blog</a></li> <li class=""><a href="../../community">Community</a></li> <li class="dropdown"> <a class="dropdown-toggle" data-toggle="dropdown" href="#">Follow Us <b class="caret"></b></a> <ul class="dropdown-menu projectsocialmedia"> <li><a href="https://twitter.com/hibernate"><img src="http://static.jboss.org/theme/images/common/socialmedia_icon40_twitter.png"></a></li> <li><a href="https://plus.google.com/112681342290762837955/posts"><img src="http://static.jboss.org/theme/images/common/socialmedia_icon40_googleplus.png"></a></li> </ul> </li> </ul> </div> </div> </div> <script>
          var displayed_releases = [];
          displayed_releases.push('5.2.10.Final');
          displayed_releases.push('5.1.10.Final');
          displayed_releases.push('5.0.12.Final');
          displayed_releases.push('4.3.11.Final');
          displayed_releases.push('4.2.21.Final');
        </script> <div class="row-fluid"> <div class="span2"> <div class="project-menu"> <div class="text-center project-menu-title"> <span class="icon-stack"> <i class="icon-circle icon-stack-base icon-fixed-width"></i> <i class="icon icon-light icon-fixed-width icon-table"></i> </span> </div> <ul class="nav nav-list"> <li class=""> <a href=".."> <i class="icon-fixed-width icon-home menu-icon"></i> About </a> </li> <li class=""> <a href="../downloads"> <i class="icon-fixed-width icon-cloud-download menu-icon"></i> Downloads </a> </li> <li class=""> <a href="../documentation"> <i class="icon-fixed-width icon-folder-open menu-icon"></i> Documentation </a> </li> <li class=""> <a href="../books"> <i class="icon-fixed-width icon-book menu-icon"></i> Books </a> </li> <li class=""> <a href="../tooling"> <i class="icon-fixed-width icon-wrench menu-icon"></i> Tooling </a> </li> <li class="active"> <a href="."> <i class="icon-fixed-width icon-time menu-icon"></i> Envers </a> </li> <li class=""> <a href="../support"> <i class="icon-fixed-width icon-user-md menu-icon"></i> Paid support </a> </li> <li class=""> <a href="../certification"> <i class="icon-fixed-width icon-certificate menu-icon"></i> Get Certified </a> </li> <li class=""> <a href="../faq"> <i class="icon-fixed-width icon-question menu-icon"></i> FAQ </a> </li> <li class=""> <a href="https://github.com/hibernate/hibernate-orm/wiki/Migration-Guides"> <i class="icon-fixed-width icon-circle-arrow-up menu-icon"></i> Migrate </a> </li> <li class=""> <a href="https://github.com/hibernate/hibernate-orm/wiki/Roadmap"> <i class="icon-fixed-width icon-road menu-icon"></i> Roadmap </a> </li> <li class=""> <a href="../contribute"> <i class="icon-fixed-width icon-beer menu-icon"></i> Contribute </a> </li> <li class="divider"></li> <li> <a href="https://community.jboss.org/en/hibernate"> <i class="icon-fixed-width icon-edit menu-icon"></i> Wiki </a> </li> <li> <a href="https://hibernate.atlassian.net/browse/HHH"> <i class="icon-fixed-width icon-exclamation-sign menu-icon"></i> Issues </a> </li> <li> <a href="https://access.redhat.com/security/team/contact/"> <i class="icon-fixed-width icon-lock menu-icon"></i> Security issue </a> </li> <li> <a href="https://forum.hibernate.org"> <i class="icon-fixed-width icon-comments menu-icon"></i> Forum </a> </li> <li> <a href="https://github.com/hibernate/hibernate-orm"> <i class="icon-fixed-width icon-code menu-icon"></i> Source code </a> </li> <li> <a href="http://ci.hibernate.org/"> <i class="icon-fixed-width icon-stethoscope menu-icon"></i> CI </a> </li> </ul> </div> <hr class="divider"> <div class="license text-center"> Released under the <a href="http://hibernate.org/license/">LGPL V2.1</a> </div> </div> <div class="span10"> <div class="row-fluid"> <div class="visible-desktop project-title-desktop"> <div class="pull-left"> <h1>Hibernate ORM Envers</h1> </div> </div> <div class="hidden-desktop"> <div class="project-title-phone text-center"> <div> <h1>Hibernate ORM Envers</h1> </div> </div> </div> </div> <div id="preamble"> <div class="sectionbody"> <div class="paragraph"> <p>The Envers module is a core Hibernate model that works both with Hibernate and JPA. In fact, you can use Envers anywhere Hibernate works whether that is standalone, inside WildFly or JBoss AS, Spring, Grails, etc.</p> </div> <div class="paragraph"> <p>The Envers module aims to provide an easy auditing / versioning solution for entity classes.</p> </div> </div> </div> <div class="sect1"> <h2 id="features"><a class="anchor" href="#features"></a>Features</h2> <div class="sectionbody"> <div class="ulist"> <ul> <li> <p>Auditing of all mappings defined by the JPA specification</p> </li> <li> <p>Auditing some Hibernate mappings that extend JPA, e.g. custom types and collections/maps of "simple" types like Strings, Integers.</p> </li> <li> <p>Logging data for each revision using a "revision entity"</p> </li> <li> <p>Querying historical snapshots of an entity and its associations</p> </li> </ul> </div> </div> </div> <div class="sect1"> <h2 id="quick-intro"><a class="anchor" href="#quick-intro"></a>Quick Intro</h2> <div class="sectionbody"> <div class="paragraph"> <p>In order for Envers to build the necessary historical audit tables and store the changes made to audited entities and their associations, the following is all that is required to get started:</p> </div> <div class="ulist"> <ul> <li> <p>Add the <code>hibernate-envers</code> dependency to your classpath.</p> </li> <li> <p>Annotate your entity or entity properties with the <code>@Audited</code> annotation.</p> </li> <li> <p>Make sure your entities using immutable unique identifiers (primary keys).</p> </li> </ul> </div> <div class="sect2"> <h3 id="a-simple-example"><a class="anchor" href="#a-simple-example"></a>A simple example</h3> <div class="listingblock"> <div class="content"> <pre class="CodeRay highlight"><code data-lang="java"><span style="color:#007">@Entity</span>&#x000A;<span style="color:#088;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">Person</span> {&#x000A;    <span style="color:#007">@Id</span>&#x000A;    <span style="color:#007">@GeneratedValue</span>&#x000A;    <span style="color:#088;font-weight:bold">private</span> <span style="color:#0a8;font-weight:bold">Integer</span> id;&#x000A;&#x000A;    <span style="color:#007">@Audited</span>&#x000A;    <span style="color:#088;font-weight:bold">private</span> <span style="color:#0a8;font-weight:bold">String</span> name;&#x000A;&#x000A;    <span style="color:#007">@Audited</span>&#x000A;    <span style="color:#088;font-weight:bold">private</span> <span style="color:#0a8;font-weight:bold">String</span> surname;&#x000A;&#x000A;    <span style="color:#007">@Audited</span>&#x000A;    <span style="color:#007">@ManyToOne</span>&#x000A;    <span style="color:#088;font-weight:bold">private</span> Address address;&#x000A;}</code></pre> </div> </div> <div class="admonitionblock tip"> <table> <tr> <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> <td class="content"> <div class="paragraph"> <p>You can find a step-by-step Envers tutorial in the <a href="http://docs.jboss.org/hibernate/orm/current/quickstart/html_single/#tutorial_envers">Getting started guide</a>.</p> </div> <div class="paragraph"> <p>Comprehensive documentation is available in the <a href="http://docs.jboss.org/hibernate/orm/current/userguide/html_single/Hibernate_User_Guide.html#envers">User&#8217;s guide</a>.</p> </div> </td> </tr> </table> </div> </div> </div> </div> <div class="sect1"> <h2 id="revisioning"><a class="anchor" href="#revisioning"></a>Revisioning</h2> <div class="sectionbody"> <div class="paragraph"> <p>Much like source code version control, Envers uses a concept of <strong>revisions</strong>.</p> </div> <div class="paragraph"> <p>A revision identifies a collection of changes to entities and their associations for all audited attributes that occured within the boundary of a transaction. These revisions are global and numeric.</p> </div> <div class="paragraph"> <p>The <code>AuditReader</code> API provides numerous ways to query for entities at particular revisions and retrieve a <em>partial</em> view of what that entity looked like at that specific revision. It also allows you to get access to lists of revisions associated with an entity type or restricted by a date range. The API also provides a way to get the revision metadata so you can know when a change occured plus any additional custom attributes you may have stored on the revision entity based on your implementation needs.</p> </div> </div> </div> </div> </div> </div> <footer class="container"> <div class="row-fluid"> <div class="span3 offset2"> <h4>Projects</h4> <ul> <li> <a href=".." title="Hibernate ORM">Hibernate ORM</a> </li> <li> <a href="../../search" title="Search">Hibernate Search</a> </li> <li> <a href="../../validator" title="Hibernate Validator">Hibernate Validator</a> </li> <li> <a href="../../ogm" title="Hibernate OGM">Hibernate OGM</a> </li> <li> <a href="../../tools" title="Hibernate Tools">Hibernate Tools</a> </li> <li> <a href="../../others" title="Other projects">Other projects</a> </li> </ul> </div> <div class="span3"> <h4>Follow Us</h4> <ul> <li> <a href="http://in.relation.to" title="Blog">Blog</a> </li> <li> <a href="https://twitter.com/hibernate/" title="Twitter">Twitter</a> </li> <li> <a href="https://plus.google.com/112681342290762837955/posts" title="Google+">Google+</a> </li> </ul> </div> <div class="span3"> <h4>Contribute and community</h4> <ul> <li> <a href="../../community" title="Community resources">Community resources</a> </li> <li> <a href="https://hibernate.atlassian.net" title="Submit a bug">Submit a bug</a> </li> <li> <a href="https://access.redhat.com/security/team/contact/" title="Report a security issue">Report a security issue</a> </li> </ul> </div> </div> </footer> <div class="container" id="companyfooter"> <div class="row-fluid"> <div class="span6 redhatlogo text-center"> <div id="logospacer"></div> <a href="http://www.redhat.com/"><img src="http://static.jboss.org/theme/images/common/redhat_logo.png"></a> </div> <div class="span6 redhatlogo text-center"> <div id="logospacer"></div> <a href="http://www.jboss.org/"> <img src="http://static.jboss.org/theme/images/common/jbossbadge.png"> </a> </div> </div> </div> <span class="backToTop"> <a href="#top">back to top</a> </span> <script src="../../javascripts/bootstrap-community.min.js"></script> <script>
       (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      
                          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      
                          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      
                          })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
       
      ga('create', 'UA-45270411-1', 'auto');
      ga('send', 'pageview');
      
      </script> </div> </body> </html>