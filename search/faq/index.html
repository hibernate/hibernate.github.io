<!DOCTYPE html>
<html lang="en">
  <head>
    <title>FAQ - Hibernate Search</title>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="" name="description">
    <meta content="Emmanuel Bernard" name="author">
    <link href="https://cdn.jsdelivr.net/npm/semantic-ui@2.2.14/dist/semantic.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/slick-carousel@1.7.1/slick/slick.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/slick-carousel@1.7.1/slick/slick-theme.css" rel="stylesheet">
    <link href="/stylesheets/styles.css?t=1528103248" rel="stylesheet">
    <!-- Defines the project favicon. Change these URLs to your specific project folder on static.jboss.org. -->
    <link href="https://static.jboss.org/hibernate/images/favicon.ico" rel="shortcut icon">
    <link href="https://static.jboss.org/hibernate/images/apple-touch-icon-144x144-precomposed.png" rel="apple-touch-icon-precomposed" sizes="144x144">
    <link href="https://static.jboss.org/hibernate/images/apple-touch-icon-114x114-precomposed.png" rel="apple-touch-icon-precomposed" sizes="114x114">
    <link href="https://static.jboss.org/hibernate/images/apple-touch-icon-72x72-precomposed.png" rel="apple-touch-icon-precomposed" sizes="72x72">
    <link href="https://static.jboss.org/hibernate/images/apple-touch-icon-precomposed.png" rel="apple-touch-icon-precomposed">
    <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/semantic-ui@2.2.14/dist/semantic.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/slick-carousel@1.7.1/slick/slick.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jquery-match-height@0.7.2/jquery.matchHeight.min.js"></script>
    <!-- Tabzilla does not support minification -->
    <script src="https://static.jboss.org/js/_jbossorg-tabzilla.js"></script>
  </head>
  <body class="pushable">
    <div class="ui vertical inverted sidebar left" id="mobile-menu">
      <div class="ui vertical fluid inverted text menu accordion">
        <div class="item">
          <a class="title">
            <i class="database grid icon"></i>
            <i class="dropdown icon"></i>
            <strong>ORM</strong>
          </a>
          <div class="content">
            <div class="menu internal-links">
              <a class="item" href="/orm/">
                <i class="grid home icon"></i>
                About
              </a>
              <a class="item" href="/orm/releases/">
                <i class="grid icon tags"></i>
                Releases
              </a>
              <a class="item" href="/orm/documentation/">
                <i class="folder grid icon open"></i>
                Documentation
              </a>
              <a class="item" href="/orm/books/">
                <i class="book grid icon"></i>
                Books
              </a>
              <a class="item" href="https://github.com/hibernate/hibernate-orm/wiki/Migration-Guides">
                <i class="grid icon share"></i>
                Migration guides
              </a>
              <a class="item" href="https://github.com/hibernate/hibernate-orm/wiki/Roadmap">
                <i class="grid icon road"></i>
                Roadmap
              </a>
              <a class="item" href="/orm/tooling/">
                <i class="grid icon wrench"></i>
                Tooling
              </a>
              <a class="item" href="/orm/envers/">
                <i class="grid icon time"></i>
                Envers
              </a>
              <a class="item" href="/orm/contribute/">
                <i class="grid icon users"></i>
                Contribute
              </a>
              <a class="item" href="/orm/support/">
                <i class="doctor grid icon"></i>
                Paid support
              </a>
              <a class="item" href="/orm/faq/">
                <i class="circle grid help icon"></i>
                FAQ
              </a>
            </div>
            <div class="menu external-links">
              <a class="item" href="https://github.com/hibernate/hibernate-orm">
                <i class="code grid icon"></i>
                Source code
              </a>
              <a class="item" href="https://hibernate.atlassian.net/browse/HHH">
                <i class="bug grid icon"></i>
                Issue tracker
              </a>
              <a class="item" href="https://access.redhat.com/security/team/contact/">
                <i class="grid icon lock"></i>
                Security issue
              </a>
              <a class="item" href="https://discourse.hibernate.org/c/hibernate-orm">
                <i class="comments grid icon"></i>
                Forum
              </a>
              <a class="item" href="https://community.jboss.org/en/hibernate">
                <i class="edit grid icon"></i>
                Wiki
              </a>
              <a class="item" href="http://ci.hibernate.org/">
                <i class="grid icon treatment"></i>
                CI
              </a>
            </div>
          </div>
        </div>
        <div class="item">
          <a class="active title">
            <i class="grid icon search"></i>
            <i class="dropdown icon"></i>
            <strong>Search</strong>
          </a>
          <div class="active content">
            <div class="menu internal-links">
              <a class="item" href="/search/">
                <i class="grid home icon"></i>
                About
              </a>
              <a class="item" href="/search/releases/">
                <i class="grid icon tags"></i>
                Releases
              </a>
              <a class="item" href="/search/documentation/">
                <i class="book grid icon"></i>
                Documentation
              </a>
              <a class="item" href="/search/roadmap/">
                <i class="grid icon road"></i>
                Roadmap
              </a>
              <a class="item" href="/search/contribute/">
                <i class="grid icon users"></i>
                Contribute
              </a>
              <a class="item" href="/search/tooling/">
                <i class="grid icon wrench"></i>
                Tooling
              </a>
              <a class="item" href="/search/support/">
                <i class="doctor grid icon"></i>
                Paid support
              </a>
              <a class="active item" href="/search/faq/">
                <i class="circle grid help icon"></i>
                FAQ
              </a>
            </div>
            <div class="menu external-links">
              <a class="item" href="https://github.com/hibernate/hibernate-orm">
                <i class="code grid icon"></i>
                Source code
              </a>
              <a class="item" href="https://hibernate.atlassian.net/browse/HHH">
                <i class="bug grid icon"></i>
                Issue tracker
              </a>
              <a class="item" href="https://access.redhat.com/security/team/contact/">
                <i class="grid icon lock"></i>
                Security issue
              </a>
              <a class="item" href="https://discourse.hibernate.org/c/hibernate-orm">
                <i class="comments grid icon"></i>
                Forum
              </a>
              <a class="item" href="https://community.jboss.org/en/hibernate">
                <i class="edit grid icon"></i>
                Wiki
              </a>
              <a class="item" href="http://ci.hibernate.org/">
                <i class="grid icon treatment"></i>
                CI
              </a>
            </div>
          </div>
        </div>
        <div class="item">
          <a class="title">
            <i class="box checkmark grid icon"></i>
            <i class="dropdown icon"></i>
            <strong>Validator</strong>
          </a>
          <div class="content">
            <div class="menu internal-links">
              <a class="item" href="/validator/">
                <i class="grid home icon"></i>
                About
              </a>
              <a class="item" href="/validator/releases/">
                <i class="grid icon tags"></i>
                Releases
              </a>
              <a class="item" href="/validator/documentation/">
                <i class="book grid icon"></i>
                Documentation
              </a>
              <a class="item" href="/validator/roadmap/">
                <i class="grid icon road"></i>
                Roadmap
              </a>
              <a class="item" href="/validator/contribute/">
                <i class="grid icon users"></i>
                Contribute
              </a>
              <a class="item" href="/validator/tooling/">
                <i class="grid icon wrench"></i>
                Tooling
              </a>
              <a class="item" href="/validator/support/">
                <i class="doctor grid icon"></i>
                Paid support
              </a>
              <a class="item" href="/validator/faq/">
                <i class="circle grid help icon"></i>
                FAQ
              </a>
            </div>
            <div class="menu external-links">
              <a class="item" href="https://github.com/hibernate/hibernate-orm">
                <i class="code grid icon"></i>
                Source code
              </a>
              <a class="item" href="https://hibernate.atlassian.net/browse/HHH">
                <i class="bug grid icon"></i>
                Issue tracker
              </a>
              <a class="item" href="https://access.redhat.com/security/team/contact/">
                <i class="grid icon lock"></i>
                Security issue
              </a>
              <a class="item" href="https://discourse.hibernate.org/c/hibernate-orm">
                <i class="comments grid icon"></i>
                Forum
              </a>
              <a class="item" href="https://community.jboss.org/en/hibernate">
                <i class="edit grid icon"></i>
                Wiki
              </a>
              <a class="item" href="http://ci.hibernate.org/">
                <i class="grid icon treatment"></i>
                CI
              </a>
            </div>
          </div>
        </div>
        <div class="item">
          <a class="title">
            <i class="grid icon sitemap"></i>
            <i class="dropdown icon"></i>
            <strong>OGM</strong>
          </a>
          <div class="content">
            <div class="menu internal-links">
              <a class="item" href="/ogm/">
                <i class="grid home icon"></i>
                About
              </a>
              <a class="item" href="/ogm/releases/">
                <i class="grid icon tags"></i>
                Releases
              </a>
              <a class="item" href="/ogm/documentation/">
                <i class="book grid icon"></i>
                Documentation
              </a>
              <a class="item" href="/ogm/roadmap/">
                <i class="grid icon road"></i>
                Roadmap
              </a>
              <a class="item" href="/ogm/contribute/">
                <i class="grid icon users"></i>
                Contribute
              </a>
              <a class="item" href="/ogm/support/">
                <i class="doctor grid icon"></i>
                Paid support
              </a>
              <a class="item" href="/ogm/faq/">
                <i class="circle grid help icon"></i>
                FAQ
              </a>
            </div>
            <div class="menu external-links">
              <a class="item" href="https://github.com/hibernate/hibernate-orm">
                <i class="code grid icon"></i>
                Source code
              </a>
              <a class="item" href="https://hibernate.atlassian.net/browse/HHH">
                <i class="bug grid icon"></i>
                Issue tracker
              </a>
              <a class="item" href="https://access.redhat.com/security/team/contact/">
                <i class="grid icon lock"></i>
                Security issue
              </a>
              <a class="item" href="https://discourse.hibernate.org/c/hibernate-orm">
                <i class="comments grid icon"></i>
                Forum
              </a>
              <a class="item" href="https://community.jboss.org/en/hibernate">
                <i class="edit grid icon"></i>
                Wiki
              </a>
              <a class="item" href="http://ci.hibernate.org/">
                <i class="grid icon treatment"></i>
                CI
              </a>
            </div>
          </div>
        </div>
        <div class="item">
          <a class="title">
            <i class="grid icon wrench"></i>
            <i class="dropdown icon"></i>
            <strong>Tools</strong>
          </a>
          <div class="content">
            <div class="menu internal-links">
              <a class="item" href="/tools/">
                <i class="grid home icon"></i>
                About
              </a>
            </div>
            <div class="menu external-links">
              <a class="item" href="https://github.com/hibernate/hibernate-orm">
                <i class="code grid icon"></i>
                Source code
              </a>
              <a class="item" href="https://hibernate.atlassian.net/browse/HHH">
                <i class="bug grid icon"></i>
                Issue tracker
              </a>
              <a class="item" href="https://access.redhat.com/security/team/contact/">
                <i class="grid icon lock"></i>
                Security issue
              </a>
              <a class="item" href="https://discourse.hibernate.org/c/hibernate-orm">
                <i class="comments grid icon"></i>
                Forum
              </a>
              <a class="item" href="https://community.jboss.org/en/hibernate">
                <i class="edit grid icon"></i>
                Wiki
              </a>
              <a class="item" href="http://ci.hibernate.org/">
                <i class="grid icon treatment"></i>
                CI
              </a>
            </div>
          </div>
        </div>
        <a class="item" href="/others/">
          Others
        </a>
        <div class="item">
          <a class="title">
            <i class="grid icon users"></i>
            <i class="dropdown icon"></i>
            <strong>Community</strong>
          </a>
          <div class="content">
            <div class="menu external-links">
              <a class="item" href="/community/">
                <i class="grid icon users"></i>
                Community
              </a>
              <a class="item" href="/community/contributors/orm/">
                <i class="grid icon database"></i>
                Contributors to ORM
              </a>
              <a class="item" href="/community/contributors/search/">
                <i class="grid icon search"></i>
                Contributors to Search
              </a>
              <a class="item" href="/community/contributors/validator/">
                <i class="grid icon checkmark box"></i>
                Contributors to Validator
              </a>
              <a class="item" href="/community/contributors/ogm/">
                <i class="grid icon sitemap"></i>
                Contributors to OGM
              </a>
              <a class="item" href="/community/corporate-contributors/">
                <i class="grid icon building outline"></i>
                Corporate contributors
              </a>
              <a class="item" href="/community/license/">
                <i class="grid icon legal"></i>
                Licenses
              </a>
            </div>
          </div>
        </div>
        <a class="item" href="http://in.relation.to/">
          Blog
        </a>
        <a class="item" href="https://discourse.hibernate.org/">
          Forums
        </a>
        <a class="item" href="https://twitter.com/hibernate/">
          <i class="icon twitter"></i>
          Follow us
        </a>
      </div>
    </div>
    <div class="pusher">
      <div class="mobile-menu-button-bar mobile only print hidden">
        <a class="item" id="mobile-menu-toggle">
          <i class="sidebar icon"></i>
          Menu
        </a>
      </div>
      <!-- begin accesibility skip to top -->
      <ul class="sr-only">
        <li>
          <a accesskey="n" href="#nav" title="Skip to navigation">Skip to navigation</a>
        </li>
        <li>
          <a accesskey="c" href="#content" title="Skip to content">Skip to content</a>
        </li>
      </ul>
      <div class="ui container banner">
        <div class="logo">
          <a href="/">
            <img alt="Hibernate" height="53" src="/images/hibernate-logo.svg" width="200">
          </a>
        </div>
        <!-- Red Hat link at the top -->
        <div class="dropup mobile hidden" id="redhat-button">
          <div class="tabnav-closed" href="#" id="tab">Red Hat</div>
        </div>
        <div class="clearfix"></div>
        <div class="ui stackable menu mobile hidden print hidden" id="nav">
          <a class="item" href="/orm/">ORM</a>
          <a class="active item" href="/search/">Search</a>
          <a class="item" href="/validator/">Validator</a>
          <a class="item" href="/ogm/">OGM</a>
          <a class="item" href="/tools/">Tools</a>
          <a class="item" href="/others/">Others</a>
          <div class="right menu">
            <a class="item" href="http://in.relation.to/">Blog</a>
            <a class="item" href="https://discourse.hibernate.org/">Forums</a>
            <a class="item" href="/community/">Community</a>
            <a class="item" href="https://twitter.com/hibernate/">
              <i class="twitter icon"></i>
              Follow us
            </a>
          </div>
        </div>
      </div>
      <script>
        var displayed_series = [];
        displayed_series.push('5.10');
        displayed_series.push('5.9');
        displayed_series.push('5.6');
      </script>
      <div class="jumbotron small">
        <div class="ui container">
          <div class="ui grid stackable">
            <div class="column row">
              <div class="column twelve wide middle aligned">
                <h1>
                  <span>
                    Hibernate Search
                  </span>
                </h1>
                <h2>
                  <span>
                    FAQ
                  </span>
                </h2>
              </div>
              <div class="column four wide middle aligned">
                
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <div class="ui container page-content">
        <div class="ui stackable grid">
          <div class="column three wide computer only print hidden">
            <div class="ui fluid vertical menu">
              <a class="item" href="..">
                <i class="grid home icon"></i>
                About
              </a>
              <div class="dropdown item link ui">
                Releases
                <i class="icon dropdown"></i>
                <div class="menu">
                  <a class="item" href="../releases">
                    Overview
                  </a>
                  <a class="item" href="../releases/5.10">
                    5.10
                    &nbsp;&nbsp;
                    <span class="ui label green">latest stable</span>
                  </a>
                  <a class="item" href="../releases/5.9">
                    5.9
                  </a>
                  <a class="item" href="../releases/5.6">
                    5.6
                  </a>
                </div>
              </div>
              <a class="item" href="../documentation">
                <i class="book grid icon"></i>
                Documentation
              </a>
              <a class="item" href="../roadmap">
                <i class="grid icon road"></i>
                Roadmap
              </a>
              <a class="item" href="../contribute">
                <i class="grid icon users"></i>
                Contribute
              </a>
              <a class="item" href="../tooling">
                <i class="grid icon wrench"></i>
                Tooling
              </a>
              <a class="item" href="../support">
                <i class="doctor grid icon"></i>
                Paid support
              </a>
              <a class="item selected" href=".">
                <i class="circle grid help icon"></i>
                FAQ
              </a>
            </div>
            <div class="ui fluid vertical menu">
              <a class="item" href="https://github.com/hibernate/hibernate-search">
                <i class="code grid icon"></i>
                Source code
              </a>
              <a class="item" href="https://hibernate.atlassian.net/browse/HSEARCH">
                <i class="bug grid icon"></i>
                Issue tracker
              </a>
              <a class="item" href="https://access.redhat.com/security/team/contact/">
                <i class="grid icon lock"></i>
                Security issue
              </a>
              <a class="item" href="https://discourse.hibernate.org/c/hibernate-search">
                <i class="comments grid icon"></i>
                Forum
              </a>
              <a class="item" href="https://community.jboss.org/en/hibernate/search">
                <i class="edit grid icon"></i>
                Wiki
              </a>
              <a class="item" href="http://ci.hibernate.org/job/hibernate-search-master/">
                <i class="grid icon treatment"></i>
                CI
              </a>
            </div>
            <hr>
            <div class="license">
              Released under the
              <a href="https://raw.github.com/hibernate/hibernate-search/master/lgpl.txt">LGPL v2.1</a>
            </div>
          </div>
          <div class="column thirteen wide computer sixteen wide mobile">
            <div class="content" id="content">
              <div id="preamble">
              <div class="sectionbody">
              <div class="paragraph">
              <p>You&#8217;ve got a question burning you? We might have the answer.</p>
              </div>
              </div>
              <div id="toc" class="toc">
              <div id="toctitle">Questions</div>
              <ul class="sectlevel1">
              <li><a href="#indexes">Indexes</a>
              <ul class="sectlevel2">
              <li><a href="#no-file-created-in-index-directory">No file created in index directory</a></li>
              <li><a href="#in-a-cluster-my-nodes-don-t-seem-to-see-each-other-index-changes">In a cluster, my nodes don&#8217;t seem to see each other index changes</a></li>
              <li><a href="#do-i-need-to-reindex-my-data-when-i-upgrade-to-a-new-hibernate-search">Do I need to reindex my data when I upgrade to a new Hibernate Search?</a></li>
              <li><a href="#i-get-a-code-indexformattoooldexception-code-what-do-i-do">I get a <code>IndexFormatTooOldException</code>, what do I do?</a></li>
              </ul>
              </li>
              <li><a href="#queries">Queries</a>
              <ul class="sectlevel2">
              <li><a href="#can-i-mix-hql-and-lucene-queries">Can I mix HQL and Lucene queries?</a></li>
              <li><a href="#avoid-two-queries-when-retrieving-results-and-size">Avoid two queries when retrieving results and size</a></li>
              </ul>
              </li>
              <li><a href="#configuration">Configuration</a>
              <ul class="sectlevel2">
              <li><a href="#i-get-an-error-message-saying-event-listeners-are-not-configured">I get an error message saying Event listeners are not configured</a></li>
              <li><a href="#how-do-i-get-started-with-the-search-archetype">How do I get started with the search archetype?</a></li>
              </ul>
              </li>
              <li><a href="#integration">Integration</a>
              <ul class="sectlevel2">
              <li><a href="#nosuchmethoderror-in-jboss-as-4-2">NoSuchMethodError in JBoss AS 4.2</a></li>
              <li><a href="#i-am-using-spring-and-the-index-is-not-being-updated-at-transaction-commit">I am using Spring and the index is not being updated at transaction commit</a></li>
              <li><a href="#how-do-i-properly-shutdown-search">How do I properly shutdown Search?</a></li>
              </ul>
              </li>
              </ul>
              </div>
              </div>
              <div class="sect1">
              <h2 id="indexes"><a class="anchor" href="#indexes"></a>Indexes</h2>
              <div class="sectionbody">
              <div class="sect2">
              <h3 id="no-file-created-in-index-directory"><a class="anchor" href="#no-file-created-in-index-directory"></a>No file created in index directory</h3>
              <div class="paragraph">
              <p>Hibernate Search won&#8217;t create a new index in existing directories.</p>
              </div>
              <div class="paragraph">
              <p>The fundamental Lucene index files are created at framework startup, but existing directories are not modified.
              Delete the directory: the framework will create it and build the basic index structure at startup.
              Since 3.1 it detects indexes in existing directories automatically.</p>
              </div>
              </div>
              <div class="sect2">
              <h3 id="in-a-cluster-my-nodes-don-t-seem-to-see-each-other-index-changes"><a class="anchor" href="#in-a-cluster-my-nodes-don-t-seem-to-see-each-other-index-changes"></a>In a cluster, my nodes don&#8217;t seem to see each other index changes</h3>
              <div class="paragraph">
              <p>The problems can be rather different but most likely a configuration issue.
              Make sure to review carefully the configuration chapter of the reference documentation,
              especially the chapter about <a href="http://docs.jboss.org/hibernate/search/5.2/reference/en-US/html_single/#search-architecture">Architecture</a>.</p>
              </div>
              <div class="paragraph">
              <p>When running an application on multiple servers, you will need to setup both an appropriate backend
              (to delegate changes to the master node) and a DirectoryProvider (to store the index).</p>
              </div>
              </div>
              <div class="sect2">
              <h3 id="do-i-need-to-reindex-my-data-when-i-upgrade-to-a-new-hibernate-search"><a class="anchor" href="#do-i-need-to-reindex-my-data-when-i-upgrade-to-a-new-hibernate-search"></a>Do I need to reindex my data when I upgrade to a new Hibernate Search?</h3>
              
              </div>
              <div class="sect2">
              <h3 id="i-get-a-code-indexformattoooldexception-code-what-do-i-do"><a class="anchor" href="#i-get-a-code-indexformattoooldexception-code-what-do-i-do"></a>I get a <code>IndexFormatTooOldException</code>, what do I do?</h3>
              <div class="paragraph">
              <p>We try to limit the amount of times you need to reindex the data.
              This usually happens when you upgrade to a new major version of Hibernate Search.
              There are two main reasons:</p>
              </div>
              <div class="ulist">
              <ul>
              <li>
              <p>Lucene forces a new index format</p>
              </li>
              <li>
              <p>we decide to index a given property in a more efficient way by default</p>
              </li>
              </ul>
              </div>
              <div class="paragraph">
              <p>The best is to read our <a href="/search/documentation/migrate/">migration guide</a> which details API and index structure changes that might impact you.</p>
              </div>
              <div class="paragraph">
              <p>The easiest approach is to regenerate the index structures (with the Mass Indexer for example).
              If you really really cannot do that, try to:</p>
              </div>
              <div class="ulist">
              <ul>
              <li>
              <p>use Lucene&#8217;s <a href="http://lucene.apache.org/core/5_3_0/MIGRATE.html">IndexUpgrader</a></p>
              </li>
              <li>
              <p>carefully update the Hibernate Search mappings in case their default behavior has changed (check the migration guide).</p>
              </li>
              </ul>
              </div>
              </div>
              </div>
              </div>
              <div class="sect1">
              <h2 id="queries"><a class="anchor" href="#queries"></a>Queries</h2>
              <div class="sectionbody">
              <div class="sect2">
              <h3 id="can-i-mix-hql-and-lucene-queries"><a class="anchor" href="#can-i-mix-hql-and-lucene-queries"></a>Can I mix HQL and Lucene queries?</h3>
              <div class="paragraph">
              <p>This is not possible as there is no way to intersect the results from both queries without iterating on at least one of the results.
              You may consider adding additional fields to the Lucene index and then look at the Filters in the reference documentation.</p>
              </div>
              </div>
              <div class="sect2">
              <h3 id="avoid-two-queries-when-retrieving-results-and-size"><a class="anchor" href="#avoid-two-queries-when-retrieving-results-and-size"></a>Avoid two queries when retrieving results and size</h3>
              <div class="paragraph">
              <p>If you plan to return the number of matching results and the list of results, you should call the methods in the following order</p>
              </div>
              <div class="listingblock">
              <div class="content">
              <pre class="CodeRay highlight"><code data-lang="java">fullTextQuery.list(); <span style="color:#777">//or iterate or scroll</span>&#x000A;fullTextQuery.getResultSize();</code></pre>
              </div>
              </div>
              <div class="paragraph">
              <p>This will execute a single Lucene query instead of two and will be faster.</p>
              </div>
              </div>
              </div>
              </div>
              <div class="sect1">
              <h2 id="configuration"><a class="anchor" href="#configuration"></a>Configuration</h2>
              <div class="sectionbody">
              <div class="sect2">
              <h3 id="i-get-an-error-message-saying-event-listeners-are-not-configured"><a class="anchor" href="#i-get-an-error-message-saying-event-listeners-are-not-configured"></a>I get an error message saying Event listeners are not configured</h3>
              <div class="paragraph">
              <p>The full error message looks something like this:</p>
              </div>
              <div class="listingblock">
              <div class="content">
              <pre>Caused by: org.hibernate.HibernateException: Hibernate Search Event listeners not configured, please check the reference documentation and the application's hibernate.cfg.xml&#x000A;   at org.hibernate.search.util.ContextHelper.getSearchFactoryBySFI(ContextHelper.java:32)</pre>
              </div>
              </div>
              <div class="paragraph">
              <p>There are several possibilities for this error.</p>
              </div>
              <div class="ulist">
              <ul>
              <li>
              <p>You are not using Hibernate Annotations in which case the event listeners have to be manually configured (see also the event listener configuration in the online documentation):</p>
              <div class="listingblock">
              <div class="content">
              <pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;hibernate-configuration&gt;</span>&#x000A;     <span style="color:#070;font-weight:bold">&lt;session-factory&gt;</span>&#x000A;        <span style="color:#070;font-weight:bold">&lt;event</span> <span style="color:#b48">type</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">post-update</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>&#x000A;            <span style="color:#070;font-weight:bold">&lt;listener</span> <span style="color:#b48">class</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">org.hibernate.search.event.FullTextIndexEventListener</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>&#x000A;        <span style="color:#070;font-weight:bold">&lt;/event&gt;</span>&#x000A;        <span style="color:#070;font-weight:bold">&lt;event</span> <span style="color:#b48">type</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">post-insert</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>&#x000A;            <span style="color:#070;font-weight:bold">&lt;listener</span> <span style="color:#b48">class</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">org.hibernate.search.event.FullTextIndexEventListener</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>&#x000A;        <span style="color:#070;font-weight:bold">&lt;/event&gt;</span>&#x000A;        <span style="color:#070;font-weight:bold">&lt;event</span> <span style="color:#b48">type</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">post-delete</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>&#x000A;            <span style="color:#070;font-weight:bold">&lt;listener</span> <span style="color:#b48">class</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">org.hibernate.search.event.FullTextIndexEventListener</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>&#x000A;        <span style="color:#070;font-weight:bold">&lt;/event&gt;</span>&#x000A;    <span style="color:#070;font-weight:bold">&lt;/session-factory&gt;</span>&#x000A;<span style="color:#070;font-weight:bold">&lt;/hibernate-configuration&gt;</span></code></pre>
              </div>
              </div>
              <div class="admonitionblock tip">
              <table>
              <tr>
              <td class="icon">
              <i class="fa icon-tip" title="Tip"></i>
              </td>
              <td class="content">
              Other versions require more event listeners, and latest versions don&#8217;t require any at all: please refer to the documentation relevant to the version you are using.
              </td>
              </tr>
              </table>
              </div>
              </li>
              <li>
              <p>Your are using the wrong version of Hibernate Annotation/Search.</p>
              <div class="paragraph">
              <p>Hibernate Annotation tries to detect Search at startup and configures the event listeners in case they are found.
              This however requires that you have the right versions of the dependencies.
              Check the Compatibility Matrix for the right combination of jar files.
              In case you are using the jar files which ship with the Hibernate Search distribution make sure that you really installed the right jar files and they they are really used.
              Some containers might have a shared lib directory with a older versions of the required libraries. Check the log file.
              Each Hibernate product reports its version when starting up.</p>
              </div>
              </li>
              <li>
              <p>If you sure you are using the right version of Annotations and Search and you still get this exception it might be that you have a custom class loading configuration which prevents Annotations to locate the Search specific event listeners.
              If this is the case try the manual configuration.</p>
              </li>
              </ul>
              </div>
              </div>
              <div class="sect2">
              <h3 id="how-do-i-get-started-with-the-search-archetype"><a class="anchor" href="#how-do-i-get-started-with-the-search-archetype"></a>How do I get started with the search archetype?</h3>
              <div class="paragraph">
              <p>Use the following command, specifying the latest Hibernate Search version for archetypeVersion (or the version of your choice):</p>
              </div>
              <div class="listingblock">
              <div class="content">
              <pre class="CodeRay highlight"><code>mvn archetype:generate -DarchetypeGroupId=org.hibernate -DarchetypeArtifactId=hibernate-search-quickstart -DarchetypeVersion=4.0.0.Final -DarchetypeRepository=http://repository.jboss.org/nexus/content/groups/public-jboss/</code></pre>
              </div>
              </div>
              <div class="paragraph">
              <p>You need to specify the group id, artifact id and a version.
              Once the sample project is created you can inspect the sources and run for exmaple mvn test.</p>
              </div>
              <div class="paragraph">
              <p>To get a full list of available archetypes in the repo run:</p>
              </div>
              <div class="listingblock">
              <div class="content">
              <pre class="CodeRay highlight"><code>mvn archetype:generate -DarchetypeRepository=http://repository.jboss.org/nexus/content/groups/public-jboss</code></pre>
              </div>
              </div>
              </div>
              </div>
              </div>
              <div class="sect1">
              <h2 id="integration"><a class="anchor" href="#integration"></a>Integration</h2>
              <div class="sectionbody">
              <div class="sect2">
              <h3 id="nosuchmethoderror-in-jboss-as-4-2"><a class="anchor" href="#nosuchmethoderror-in-jboss-as-4-2"></a>NoSuchMethodError in JBoss AS 4.2</h3>
              <div class="paragraph">
              <p>The error is: <code>Caused by: java.lang.NoSuchMethodError: org.hibernate.search.FullTextSession.createFullTextQuery(Lorg/apache/lucene/search/Query;[Ljava/lang/Class;)Lorg/hibernate/search/FullTextQuery;</code></p>
              </div>
              <div class="paragraph">
              <p>Hibernate Search 3.0 requires Hibernate Annotations 3.3.x and JBoss AS 4.2 ships with 3.2.x. Replace the following jars:</p>
              </div>
              <div class="ulist">
              <ul>
              <li>
              <p>hibernate-annotations.jar (3.3.x for Search 3.0)</p>
              </li>
              <li>
              <p>hibernate-validator.jar (3.0.x for Search 3.0)</p>
              </li>
              <li>
              <p>hibernate-entitymanager.jar (3.3.x for Search 3.0)</p>
              </li>
              <li>
              <p>hibernate-commons-annotations.jar (3.0.x for Search 3.0)</p>
              </li>
              </ul>
              </div>
              <div class="paragraph">
              <p>in <code>[JBOSS_HOME]/server/[myconfig]/lib</code>.
              Then place Hibernate Search and Lucene JARs in your EAR or WAR.</p>
              </div>
              </div>
              <div class="sect2">
              <h3 id="i-am-using-spring-and-the-index-is-not-being-updated-at-transaction-commit"><a class="anchor" href="#i-am-using-spring-and-the-index-is-not-being-updated-at-transaction-commit"></a>I am using Spring and the index is not being updated at transaction commit</h3>
              <div class="paragraph">
              <p>See also <a href="http://www.hibernate.org/441.html">spring integration</a> and especially check you&#8217;re using the correct transaction manager:</p>
              </div>
              <div class="listingblock">
              <div class="content">
              <pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;bean</span> <span style="color:#b48">id</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">transactionManager</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">class</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">org.springframework.orm.jpa.JpaTransactionManager</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span></code></pre>
              </div>
              </div>
              </div>
              <div class="sect2">
              <h3 id="how-do-i-properly-shutdown-search"><a class="anchor" href="#how-do-i-properly-shutdown-search"></a>How do I properly shutdown Search?</h3>
              <div class="paragraph">
              <p>Search is using background threads to manage the indexes; they are gracefully closed when you close Hibernate&#8217;s SessionFactory.
              Closing the SessionFactory is always recommended; when using Search it&#8217;s mandatory, otherwise your application might never terminate.</p>
              </div>
              <div class="listingblock">
              <div class="content">
              <pre class="CodeRay highlight"><code data-lang="java">sessionFactory.close();</code></pre>
              </div>
              </div>
              <div class="paragraph">
              <p>When using <code>exclusive_index_use=true</code> it&#8217;s also needed to properly clear the index locks; note that this options is enabled by default since Hibernate Search 4.0.</p>
              </div>
              </div>
              </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <script>
        $(document).ready(function() {
          $('.ui.menu .ui.dropdown').dropdown({ on: 'hover' });
        });
      </script>
      <div class="ui inverted vertical footer segment print hidden">
        <div class="ui container">
          <div class="ui stackable inverted divided equal height stackable grid">
            <div class="three wide column">
              <h4 class="ui inverted header">Projects</h4>
              <div class="ui inverted link list">
                <a class="item" href="../../orm" title="Hibernate ORM">Hibernate ORM</a>
                <a class="item" href=".." title="Search">Hibernate Search</a>
                <a class="item" href="../../validator" title="Hibernate Validator">Hibernate Validator</a>
                <a class="item" href="../../ogm" title="Hibernate OGM">Hibernate OGM</a>
                <a class="item" href="../../tools" title="Hibernate Tools">Hibernate Tools</a>
                <a class="item" href="../../others" title="Other projects">Other projects</a>
              </div>
            </div>
            <div class="three wide column">
              <h4 class="ui inverted header">Follow us</h4>
              <div class="ui inverted link list">
                <a class="item" href="http://in.relation.to/" title="Blog">Blog</a>
                <a class="item" href="https://twitter.com/hibernate/" title="Twitter">Twitter</a>
                <a class="item" href="https://plus.google.com/112681342290762837955/posts" title="Google+">Google+</a>
              </div>
            </div>
            <div class="five wide column">
              <h4 class="ui inverted header">Contribute and community</h4>
              <div class="ui inverted link list">
                <a class="item" href="../../community" title="Community resources">Community resources</a>
                <a class="item" href="https://github.com/hibernate/">Our GitHub organization</a>
                <a class="item" href="https://hibernate.atlassian.net/" title="Submit a bug">Submit a bug</a>
                <a class="item" href="https://discourse.hibernate.org/" title="Submit a bug">Our forums</a>
                <a class="item" href="https://access.redhat.com/security/team/contact/" title="Report a security issue">Report a security issue</a>
              </div>
            </div>
            <div class="five wide column sponsor">
              <div class="logo">
                <a href="https://www.redhat.com/">
                  <img height="48" src="../../images/redhat.png" title="Red Hat" width="216">
                </a>
              </div>
              <div class="logo">
                <a href="https://developers.redhat.com/">
                  <img height="48" src="../../images/redhat-developers.png" title="Red Hat Developers" width="216">
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
      <span class="back-to-top computer only">
        <a href="javascript: void(0)">Back to top</a>
      </span>
    </div>
    <script>
     (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
     
    ga('create', 'UA-45270411-1', 'auto');
    ga('send', 'pageview');
    
    </script>
    <script>
      $(function() {
        $('#mobile-menu').sidebar('setting', {
          transition: 'push'
        });
        $('#mobile-menu').sidebar('attach events', '#mobile-menu-toggle');
      
        $('.ui.accordion').accordion();
      
        renderTabzilla("Hibernate Search", "search", true);
      
        $(window).scroll(function(e) {
          if($(this).scrollTop()>150){
            $('.back-to-top').fadeIn(1000); // Fading in the button on scroll after 150px
          }
          else {
            $('.back-to-top').fadeOut(500); // Fading out the button on scroll if less than 150px
          }
        });
      
          $('.back-to-top').click(function(e) {
            $('body, html').animate({scrollTop:0}, 800);
          });
        });
    </script>
  </body>
</html>
