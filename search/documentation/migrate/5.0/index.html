<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Migration Guide from Hibernate Search 4.x to 5.0 - Hibernate Search</title>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="" name="description">
    <meta content="Hardy Ferentschik" name="author">
    <link href="https://cdn.jsdelivr.net/npm/semantic-ui@2.2.14/dist/semantic.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/slick-carousel@1.7.1/slick/slick.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/slick-carousel@1.7.1/slick/slick-theme.css" rel="stylesheet">
    <link href="/stylesheets/styles.css?t=1525976446" rel="stylesheet">
    <!-- Defines the project favicon. Change these URLs to your specific project folder on static.jboss.org. -->
    <link href="https://static.jboss.org/hibernate/images/favicon.ico" rel="shortcut icon">
    <link href="https://static.jboss.org/hibernate/images/apple-touch-icon-144x144-precomposed.png" rel="apple-touch-icon-precomposed" sizes="144x144">
    <link href="https://static.jboss.org/hibernate/images/apple-touch-icon-114x114-precomposed.png" rel="apple-touch-icon-precomposed" sizes="114x114">
    <link href="https://static.jboss.org/hibernate/images/apple-touch-icon-72x72-precomposed.png" rel="apple-touch-icon-precomposed" sizes="72x72">
    <link href="https://static.jboss.org/hibernate/images/apple-touch-icon-precomposed.png" rel="apple-touch-icon-precomposed">
    <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/semantic-ui@2.2.14/dist/semantic.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/slick-carousel@1.7.1/slick/slick.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jquery-match-height@0.7.2/jquery.matchHeight.min.js"></script>
    <!-- Tabzilla does not support minification -->
    <script src="https://static.jboss.org/js/_jbossorg-tabzilla.js"></script>
  </head>
  <body class="pushable">
    <div class="ui vertical inverted sidebar left" id="mobile-menu">
      <div class="ui vertical fluid inverted text menu accordion">
        <div class="item">
          <a class="title">
            <i class="database grid icon"></i>
            <i class="dropdown icon"></i>
            <strong>ORM</strong>
          </a>
          <div class="content">
            <div class="menu internal-links">
              <a class="item" href="/orm/">
                <i class="grid home icon"></i>
                About
              </a>
              <a class="item" href="/orm/releases/">
                <i class="grid icon tags"></i>
                Releases
              </a>
              <a class="item" href="/orm/documentation/">
                <i class="folder grid icon open"></i>
                Documentation
              </a>
              <a class="item" href="/orm/books/">
                <i class="book grid icon"></i>
                Books
              </a>
              <a class="item" href="https://github.com/hibernate/hibernate-orm/wiki/Migration-Guides">
                <i class="grid icon share"></i>
                Migration guides
              </a>
              <a class="item" href="https://github.com/hibernate/hibernate-orm/wiki/Roadmap">
                <i class="grid icon road"></i>
                Roadmap
              </a>
              <a class="item" href="/orm/tooling/">
                <i class="grid icon wrench"></i>
                Tooling
              </a>
              <a class="item" href="/orm/envers/">
                <i class="grid icon time"></i>
                Envers
              </a>
              <a class="item" href="/orm/contribute/">
                <i class="grid icon users"></i>
                Contribute
              </a>
              <a class="item" href="/orm/support/">
                <i class="doctor grid icon"></i>
                Paid support
              </a>
              <a class="item" href="/orm/faq/">
                <i class="circle grid help icon"></i>
                FAQ
              </a>
            </div>
            <div class="menu external-links">
              <a class="item" href="https://github.com/hibernate/hibernate-orm">
                <i class="code grid icon"></i>
                Source code
              </a>
              <a class="item" href="https://hibernate.atlassian.net/browse/HHH">
                <i class="bug grid icon"></i>
                Issue tracker
              </a>
              <a class="item" href="https://access.redhat.com/security/team/contact/">
                <i class="grid icon lock"></i>
                Security issue
              </a>
              <a class="item" href="https://discourse.hibernate.org/c/hibernate-orm">
                <i class="comments grid icon"></i>
                Forum
              </a>
              <a class="item" href="https://community.jboss.org/en/hibernate">
                <i class="edit grid icon"></i>
                Wiki
              </a>
              <a class="item" href="http://ci.hibernate.org/">
                <i class="grid icon treatment"></i>
                CI
              </a>
            </div>
          </div>
        </div>
        <div class="item">
          <a class="active title">
            <i class="grid icon search"></i>
            <i class="dropdown icon"></i>
            <strong>Search</strong>
          </a>
          <div class="active content">
            <div class="menu internal-links">
              <a class="item" href="/search/">
                <i class="grid home icon"></i>
                About
              </a>
              <a class="item" href="/search/releases/">
                <i class="grid icon tags"></i>
                Releases
              </a>
              <a class="active item" href="/search/documentation/">
                <i class="book grid icon"></i>
                Documentation
              </a>
              <a class="item" href="/search/roadmap/">
                <i class="grid icon road"></i>
                Roadmap
              </a>
              <a class="item" href="/search/contribute/">
                <i class="grid icon users"></i>
                Contribute
              </a>
              <a class="item" href="/search/tooling/">
                <i class="grid icon wrench"></i>
                Tooling
              </a>
              <a class="item" href="/search/support/">
                <i class="doctor grid icon"></i>
                Paid support
              </a>
              <a class="item" href="/search/faq/">
                <i class="circle grid help icon"></i>
                FAQ
              </a>
            </div>
            <div class="menu external-links">
              <a class="item" href="https://github.com/hibernate/hibernate-orm">
                <i class="code grid icon"></i>
                Source code
              </a>
              <a class="item" href="https://hibernate.atlassian.net/browse/HHH">
                <i class="bug grid icon"></i>
                Issue tracker
              </a>
              <a class="item" href="https://access.redhat.com/security/team/contact/">
                <i class="grid icon lock"></i>
                Security issue
              </a>
              <a class="item" href="https://discourse.hibernate.org/c/hibernate-orm">
                <i class="comments grid icon"></i>
                Forum
              </a>
              <a class="item" href="https://community.jboss.org/en/hibernate">
                <i class="edit grid icon"></i>
                Wiki
              </a>
              <a class="item" href="http://ci.hibernate.org/">
                <i class="grid icon treatment"></i>
                CI
              </a>
            </div>
          </div>
        </div>
        <div class="item">
          <a class="title">
            <i class="box checkmark grid icon"></i>
            <i class="dropdown icon"></i>
            <strong>Validator</strong>
          </a>
          <div class="content">
            <div class="menu internal-links">
              <a class="item" href="/validator/">
                <i class="grid home icon"></i>
                About
              </a>
              <a class="item" href="/validator/releases/">
                <i class="grid icon tags"></i>
                Releases
              </a>
              <a class="item" href="/validator/documentation/">
                <i class="book grid icon"></i>
                Documentation
              </a>
              <a class="item" href="/validator/roadmap/">
                <i class="grid icon road"></i>
                Roadmap
              </a>
              <a class="item" href="/validator/contribute/">
                <i class="grid icon users"></i>
                Contribute
              </a>
              <a class="item" href="/validator/tooling/">
                <i class="grid icon wrench"></i>
                Tooling
              </a>
              <a class="item" href="/validator/support/">
                <i class="doctor grid icon"></i>
                Paid support
              </a>
              <a class="item" href="/validator/faq/">
                <i class="circle grid help icon"></i>
                FAQ
              </a>
            </div>
            <div class="menu external-links">
              <a class="item" href="https://github.com/hibernate/hibernate-orm">
                <i class="code grid icon"></i>
                Source code
              </a>
              <a class="item" href="https://hibernate.atlassian.net/browse/HHH">
                <i class="bug grid icon"></i>
                Issue tracker
              </a>
              <a class="item" href="https://access.redhat.com/security/team/contact/">
                <i class="grid icon lock"></i>
                Security issue
              </a>
              <a class="item" href="https://discourse.hibernate.org/c/hibernate-orm">
                <i class="comments grid icon"></i>
                Forum
              </a>
              <a class="item" href="https://community.jboss.org/en/hibernate">
                <i class="edit grid icon"></i>
                Wiki
              </a>
              <a class="item" href="http://ci.hibernate.org/">
                <i class="grid icon treatment"></i>
                CI
              </a>
            </div>
          </div>
        </div>
        <div class="item">
          <a class="title">
            <i class="grid icon sitemap"></i>
            <i class="dropdown icon"></i>
            <strong>OGM</strong>
          </a>
          <div class="content">
            <div class="menu internal-links">
              <a class="item" href="/ogm/">
                <i class="grid home icon"></i>
                About
              </a>
              <a class="item" href="/ogm/releases/">
                <i class="grid icon tags"></i>
                Releases
              </a>
              <a class="item" href="/ogm/documentation/">
                <i class="book grid icon"></i>
                Documentation
              </a>
              <a class="item" href="/ogm/roadmap/">
                <i class="grid icon road"></i>
                Roadmap
              </a>
              <a class="item" href="/ogm/contribute/">
                <i class="grid icon users"></i>
                Contribute
              </a>
              <a class="item" href="/ogm/support/">
                <i class="doctor grid icon"></i>
                Paid support
              </a>
              <a class="item" href="/ogm/faq/">
                <i class="circle grid help icon"></i>
                FAQ
              </a>
            </div>
            <div class="menu external-links">
              <a class="item" href="https://github.com/hibernate/hibernate-orm">
                <i class="code grid icon"></i>
                Source code
              </a>
              <a class="item" href="https://hibernate.atlassian.net/browse/HHH">
                <i class="bug grid icon"></i>
                Issue tracker
              </a>
              <a class="item" href="https://access.redhat.com/security/team/contact/">
                <i class="grid icon lock"></i>
                Security issue
              </a>
              <a class="item" href="https://discourse.hibernate.org/c/hibernate-orm">
                <i class="comments grid icon"></i>
                Forum
              </a>
              <a class="item" href="https://community.jboss.org/en/hibernate">
                <i class="edit grid icon"></i>
                Wiki
              </a>
              <a class="item" href="http://ci.hibernate.org/">
                <i class="grid icon treatment"></i>
                CI
              </a>
            </div>
          </div>
        </div>
        <div class="item">
          <a class="title">
            <i class="grid icon wrench"></i>
            <i class="dropdown icon"></i>
            <strong>Tools</strong>
          </a>
          <div class="content">
            <div class="menu internal-links">
              <a class="item" href="/tools/">
                <i class="grid home icon"></i>
                About
              </a>
            </div>
            <div class="menu external-links">
              <a class="item" href="https://github.com/hibernate/hibernate-orm">
                <i class="code grid icon"></i>
                Source code
              </a>
              <a class="item" href="https://hibernate.atlassian.net/browse/HHH">
                <i class="bug grid icon"></i>
                Issue tracker
              </a>
              <a class="item" href="https://access.redhat.com/security/team/contact/">
                <i class="grid icon lock"></i>
                Security issue
              </a>
              <a class="item" href="https://discourse.hibernate.org/c/hibernate-orm">
                <i class="comments grid icon"></i>
                Forum
              </a>
              <a class="item" href="https://community.jboss.org/en/hibernate">
                <i class="edit grid icon"></i>
                Wiki
              </a>
              <a class="item" href="http://ci.hibernate.org/">
                <i class="grid icon treatment"></i>
                CI
              </a>
            </div>
          </div>
        </div>
        <a class="item" href="/others/">
          Others
        </a>
        <div class="item">
          <a class="title">
            <i class="grid icon users"></i>
            <i class="dropdown icon"></i>
            <strong>Community</strong>
          </a>
          <div class="content">
            <div class="menu external-links">
              <a class="item" href="/community/">
                <i class="grid icon users"></i>
                Community
              </a>
              <a class="item" href="/community/contributors/orm/">
                <i class="grid icon database"></i>
                Contributors to ORM
              </a>
              <a class="item" href="/community/contributors/search/">
                <i class="grid icon search"></i>
                Contributors to Search
              </a>
              <a class="item" href="/community/contributors/validator/">
                <i class="grid icon checkmark box"></i>
                Contributors to Validator
              </a>
              <a class="item" href="/community/contributors/ogm/">
                <i class="grid icon sitemap"></i>
                Contributors to OGM
              </a>
              <a class="item" href="/community/corporate-contributors/">
                <i class="grid icon building outline"></i>
                Corporate contributors
              </a>
              <a class="item" href="/community/license/">
                <i class="grid icon legal"></i>
                Licenses
              </a>
            </div>
          </div>
        </div>
        <a class="item" href="http://in.relation.to/">
          Blog
        </a>
        <a class="item" href="https://discourse.hibernate.org/">
          Forums
        </a>
        <a class="item" href="https://twitter.com/hibernate/">
          <i class="icon twitter"></i>
          Follow us
        </a>
      </div>
    </div>
    <div class="pusher">
      <div class="mobile-menu-button-bar mobile only print hidden">
        <a class="item" id="mobile-menu-toggle">
          <i class="sidebar icon"></i>
          Menu
        </a>
      </div>
      <!-- begin accesibility skip to top -->
      <ul class="sr-only">
        <li>
          <a accesskey="n" href="#nav" title="Skip to navigation">Skip to navigation</a>
        </li>
        <li>
          <a accesskey="c" href="#content" title="Skip to content">Skip to content</a>
        </li>
      </ul>
      <div class="ui container banner">
        <div class="logo">
          <a href="/">
            <img alt="Hibernate" height="53" src="/images/hibernate-logo.svg" width="200">
          </a>
        </div>
        <!-- Red Hat link at the top -->
        <div class="dropup mobile hidden" id="redhat-button">
          <div class="tabnav-closed" href="#" id="tab">Red Hat</div>
        </div>
        <div class="clearfix"></div>
        <div class="ui stackable menu mobile hidden print hidden" id="nav">
          <a class="item" href="/orm/">ORM</a>
          <a class="active item" href="/search/">Search</a>
          <a class="item" href="/validator/">Validator</a>
          <a class="item" href="/ogm/">OGM</a>
          <a class="item" href="/tools/">Tools</a>
          <a class="item" href="/others/">Others</a>
          <div class="right menu">
            <a class="item" href="http://in.relation.to/">Blog</a>
            <a class="item" href="https://discourse.hibernate.org/">Forums</a>
            <a class="item" href="/community/">Community</a>
            <a class="item" href="https://twitter.com/hibernate/">
              <i class="twitter icon"></i>
              Follow us
            </a>
          </div>
        </div>
      </div>
      <script>
        var displayed_series = [];
        displayed_series.push('5.10');
        displayed_series.push('5.9');
        displayed_series.push('5.6');
      </script>
      <div class="jumbotron small">
        <div class="ui container">
          <div class="ui grid stackable">
            <div class="column row">
              <div class="column twelve wide middle aligned">
                <h1>
                  <span>
                    Hibernate Search
                  </span>
                </h1>
                <h2>
                  <span>
                    Migration Guide from Hibernate Search 4.x to 5.0
                  </span>
                </h2>
              </div>
              <div class="column four wide middle aligned">
                
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <div class="ui container page-content">
        <div class="ui stackable grid">
          <div class="column three wide computer only print hidden">
            <div class="ui fluid vertical menu">
              <a class="item" href="../../..">
                <i class="grid home icon"></i>
                About
              </a>
              <div class="dropdown item link ui">
                Releases
                <i class="icon dropdown"></i>
                <div class="menu">
                  <a class="item" href="../../../releases">
                    Overview
                  </a>
                  <a class="item" href="../../../releases/5.10">
                    5.10
                    &nbsp;&nbsp;
                    <span class="ui label orange">development</span>
                  </a>
                  <a class="item" href="../../../releases/5.9">
                    5.9
                    &nbsp;&nbsp;
                    <span class="ui label green">latest stable</span>
                  </a>
                  <a class="item" href="../../../releases/5.6">
                    5.6
                  </a>
                </div>
              </div>
              <a class="item selected" href="../..">
                <i class="book grid icon"></i>
                Documentation
              </a>
              <a class="item" href="../../../roadmap">
                <i class="grid icon road"></i>
                Roadmap
              </a>
              <a class="item" href="../../../contribute">
                <i class="grid icon users"></i>
                Contribute
              </a>
              <a class="item" href="../../../tooling">
                <i class="grid icon wrench"></i>
                Tooling
              </a>
              <a class="item" href="../../../support">
                <i class="doctor grid icon"></i>
                Paid support
              </a>
              <a class="item" href="../../../faq">
                <i class="circle grid help icon"></i>
                FAQ
              </a>
            </div>
            <div class="ui fluid vertical menu">
              <a class="item" href="https://github.com/hibernate/hibernate-search">
                <i class="code grid icon"></i>
                Source code
              </a>
              <a class="item" href="https://hibernate.atlassian.net/browse/HSEARCH">
                <i class="bug grid icon"></i>
                Issue tracker
              </a>
              <a class="item" href="https://access.redhat.com/security/team/contact/">
                <i class="grid icon lock"></i>
                Security issue
              </a>
              <a class="item" href="https://discourse.hibernate.org/c/hibernate-search">
                <i class="comments grid icon"></i>
                Forum
              </a>
              <a class="item" href="https://community.jboss.org/en/hibernate/search">
                <i class="edit grid icon"></i>
                Wiki
              </a>
              <a class="item" href="http://ci.hibernate.org/job/hibernate-search-master/">
                <i class="grid icon treatment"></i>
                CI
              </a>
            </div>
            <hr>
            <div class="license">
              Released under the
              <a href="https://raw.github.com/hibernate/hibernate-search/master/lgpl.txt">LGPL v2.1</a>
            </div>
          </div>
          <div class="column thirteen wide computer sixteen wide mobile">
            <div class="content" id="content">
              <div id="preamble">
              <div class="sectionbody">
              <div class="paragraph">
              <p>Here we are helping you migrate your existing Hibernate Search application to the latest and greatest.</p>
              </div>
              </div>
              <div id="toc" class="toc">
              <div id="toctitle">Content</div>
              <ul class="sectlevel1">
              <li><a href="#upgrade-to-hibernate-search-5-0-0-final">Upgrade to Hibernate Search 5.0.0.Final</a>
              <ul class="sectlevel2">
              <li><a href="#requirements">Requirements</a></li>
              <li><a href="#api-changes">API changes</a>
              <ul class="sectlevel3">
              <li><a href="#sorting-query-results">Sorting query results</a></li>
              </ul>
              </li>
              <li><a href="#class-re-names-and-re-locations">Class re-names and re-locations</a>
              <ul class="sectlevel3">
              <li><a href="#within-hibernate-search">Within Hibernate Search</a></li>
              <li><a href="#within-apache-lucene">Within Apache Lucene</a></li>
              </ul>
              </li>
              <li><a href="#mapping">Mapping</a>
              <ul class="sectlevel3">
              <li><a href="#id-fields-of-embedded-relations-no-longer-indexed-by-default">Id fields of embedded relations no longer indexed by default</a></li>
              <li><a href="#number-and-date-index-format">Number and date index format</a></li>
              </ul>
              </li>
              <li><a href="#misc">Misc</a>
              <ul class="sectlevel3">
              <li><a href="#fulltextindexeventlistener-now-final">FullTextIndexEventListener now final</a></li>
              <li><a href="#hibernate-search-analyzers-module-removed">hibernate-search-analyzers module removed</a></li>
              <li><a href="#jms-controller-api-changed">JMS controller API changed</a></li>
              <li><a href="#serviceregistry-api-updated">ServiceRegistry API updated</a></li>
              </ul>
              </li>
              </ul>
              </li>
              </ul>
              </div>
              </div>
              <div class="sect1">
              <h2 id="upgrade-to-hibernate-search-5-0-0-final"><a class="anchor" href="#upgrade-to-hibernate-search-5-0-0-final"></a>Upgrade to Hibernate Search 5.0.0.Final</h2>
              <div class="sectionbody">
              <div class="paragraph">
              <p>The aim of this guide is to assist you migrating an existing Hibernate Search 4 application to
              Hibernate Search 5.</p>
              </div>
              <div class="admonitionblock note">
              <table>
              <tr>
              <td class="icon">
              <i class="fa icon-note" title="Note"></i>
              </td>
              <td class="content">
              This document provides pointers for a migration.
              It refers to Hibernate Search 5.0.0.Final.
              If you think something is missing or something does not work, please <a href="/community">contact us</a>.
              If you&#8217;re looking to migrate different versions see <a href="/search/documentation/migrate">Hibernate Search migration guides</a>.
              </td>
              </tr>
              </table>
              </div>
              <div class="sect2">
              <h3 id="requirements"><a class="anchor" href="#requirements"></a>Requirements</h3>
              <div class="paragraph">
              <p>The most important upfront. Hibernate Search 5 requires now Java 7. Support for Java 6 has been dropped.</p>
              </div>
              <div class="paragraph">
              <p>Hibernate Search 5 also builds now upon Lucene 4 (more specifically
              <a href="http://lucene.apache.org/core/4_10_2/index.html">4.10.2</a>). If you are using any
              native Lucene APIs make sure to align with this version. Refer also to the
              <a href="https://lucene.apache.org/core/4_10_2/MIGRATE.html">Lucene Migration Guide</a>.</p>
              </div>
              <div class="paragraph">
              <p>Hibernate Search is compatible with <a href="/orm">Hibernate ORM</a> 4.3.7.Final and
              <a href="http://infinispan.org/">Infinispan</a> 7.0.2.Final.</p>
              </div>
              </div>
              <div class="sect2">
              <h3 id="api-changes"><a class="anchor" href="#api-changes"></a>API changes</h3>
              <div class="paragraph">
              <p>Even though the Lucene API changes between version 3 and 4 are rather big, we were able to hide most
              of the complexities behind the Hibernate Search API. Some changes, however, trickle all the way through.</p>
              </div>
              <div class="sect3">
              <h4 id="sorting-query-results"><a class="anchor" href="#sorting-query-results"></a>Sorting query results</h4>
              <div class="paragraph">
              <p>Lucene&#8217;s <code>SortField</code> API has changed. Instead of</p>
              </div>
              <div class="listingblock">
              <div class="content">
              <pre class="CodeRay highlight"><code data-lang="java">fulltextQuery.setSort( <span style="color:#080;font-weight:bold">new</span> Sort( <span style="color:#080;font-weight:bold">new</span> SortField( <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">title</span><span style="color:#710">&quot;</span></span>, SortField.STRING ) ) );</code></pre>
              </div>
              </div>
              <div class="paragraph">
              <p>you now need to use:</p>
              </div>
              <div class="listingblock">
              <div class="content">
              <pre class="CodeRay highlight"><code data-lang="java">fulltextQuery.setSort( <span style="color:#080;font-weight:bold">new</span> Sort( <span style="color:#080;font-weight:bold">new</span> SortField( <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">title</span><span style="color:#710">&quot;</span></span>, SortField.Type.STRING ) ) );</code></pre>
              </div>
              </div>
              </div>
              </div>
              <div class="sect2">
              <h3 id="class-re-names-and-re-locations"><a class="anchor" href="#class-re-names-and-re-locations"></a>Class re-names and re-locations</h3>
              <div class="paragraph">
              <p>Between Hibernate Search 4 and 5 several classes have changes names or package. This happened within
              the Search API as well as within the Lucene API. The following is a list of the most important changes.</p>
              </div>
              <div class="sect3">
              <h4 id="within-hibernate-search"><a class="anchor" href="#within-hibernate-search"></a>Within Hibernate Search</h4>
              <div class="ulist">
              <ul>
              <li>
              <p><code>SearchFactory</code> was moved from the module <code>hibernate-search-engine</code> to <code>hibernate-search-orm</code> as
              it should only be used by the ORM integration. Other integrators should depend exclusively on <code>SearchIntegrator</code> (former <code>SearchFactoryIntegrator</code>)</p>
              </li>
              <li>
              <p>The following classes got re-located:</p>
              <div class="ulist">
              <ul>
              <li>
              <p><code>org.hibernate.search.engine.impl.SearchMappingBuilder</code> &#8658;<br>
              <code>org.hibernate.search.engine.spi.SearchMappingBuilder</code></p>
              </li>
              <li>
              <p><code>org.hibernate.search.Environment</code> &#8658;<br>
              <code>org.hibernate.search.cfg.Environment</code></p>
              </li>
              <li>
              <p><code>org.hibernate.search.FullTextFilter</code> &#8658;<br>
              <code>org.hibernate.search.filter.FullTextFilter</code></p>
              </li>
              <li>
              <p><code>org.hibernate.search.indexes.impl.DirectoryBasedIndexManager</code> &#8658;<br>
              <code>org.hibernate.search.indexes.spi.DirectoryBasedIndexManager</code></p>
              </li>
              <li>
              <p><code>org.hibernate.search.infinispan.impl.InfinispanDirectoryProvider</code> &#8658;<br>
              <code>org.hibernate.search.infinispan.spi.InfinispanDirectoryProvider</code></p>
              </li>
              <li>
              <p><code>org.hibernate.search.ProjectionConstants</code> &#8658;<br>
              <code>org.hibernate.search.engine.ProjectionConstants</code></p>
              </li>
              <li>
              <p><code>org.hibernate.search.SearchException</code> &#8658;<br>
              <code>org.hibernate.search.exception.SearchException</code></p>
              </li>
              <li>
              <p><code>org.hibernate.search.spi.MassIndexerFactory</code> &#8658;<br>
              <code>org.hibernate.search.batchindexing.spi.MassIndexerFactory</code></p>
              </li>
              <li>
              <p><code>org.hibernate.search.spi.SearchFactoryBuilder</code> &#8658;<br>
              <code>org.hibernate.search.spi.SearchIntegratorBuilder</code></p>
              </li>
              <li>
              <p><code>org.hibernate.search.spi.SearchFactoryIntegrator</code> &#8658;<br>
              <code>org.hibernate.search.spi.SearchIntegrator</code></p>
              </li>
              <li>
              <p><code>org.hibernate.search.Version</code> &#8658;<br>
              <code>org.hibernate.search.engine.Version</code></p>
              </li>
              </ul>
              </div>
              </li>
              <li>
              <p>The enum value <code>SpatialMode.GRID</code> was renamed to <code>SpatialMode.HASH</code></p>
              </li>
              </ul>
              </div>
              </div>
              <div class="sect3">
              <h4 id="within-apache-lucene"><a class="anchor" href="#within-apache-lucene"></a>Within Apache Lucene</h4>
              <div class="ulist">
              <ul>
              <li>
              <p>Lucene&#8217;s <code>QueryParser</code> changed package from <code>org.apache.lucene.queryParser.QueryParser</code> to
              <code>org.apache.lucene.queryparser.classic.QueryParser</code></p>
              </li>
              <li>
              <p>Many popular <code>Analyzer</code>, <code>TokenFilter</code> and <code>CharFilter</code> classes moved. Refer to the
              <a href="http://lucene.apache.org/core/4_10_2/">Lucene API docs</a> to find the appropriate replacement.</p>
              </li>
              <li>
              <p>Solr utilities classes, for example
              <code><a href="http://lucene.apache.org/core/4_10_2/analyzers-common/org/apache/lucene/analysis/util/TokenizerFactory.html">TokenizerFactory</a></code> or
              <code><a href="http://lucene.apache.org/core/4_10_2/analyzers-common/org/apache/lucene/analysis/util/TokenFilterFactory.html">TokenFilterFactory</a></code>,
              were moved into Apache Lucene. For this reason we could remove the dependency to Apache Solr.
              Good news is a simplified dependency graph! The bad news, if you depend on some of these utilities
              or custom analyzers, you&#8217;ll need to find the new (package) name</p>
              </li>
              </ul>
              </div>
              </div>
              </div>
              <div class="sect2">
              <h3 id="mapping"><a class="anchor" href="#mapping"></a>Mapping</h3>
              <div class="sect3">
              <h4 id="id-fields-of-embedded-relations-no-longer-indexed-by-default"><a class="anchor" href="#id-fields-of-embedded-relations-no-longer-indexed-by-default"></a>Id fields of embedded relations no longer indexed by default</h4>
              <div class="paragraph">
              <p>When using an <code>@IndexedEmbedded</code> annotation to include fields from a related entity, we would include the 'id' of the related entity.
              These 'id' fields are no longer included by default, but you can enable the inclusion by using the <code>includeEmbeddedObjectId</code> attribute of  the <code>@IndexedEmbedded</code> annotation.</p>
              </div>
              <div class="listingblock">
              <div class="content">
              <pre class="CodeRay highlight"><code data-lang="java"><span style="color:#007">@IndexedEmbedded</span>(includeEmbeddedObjectId=<span style="color:#069">true</span>)</code></pre>
              </div>
              </div>
              </div>
              <div class="sect3">
              <h4 id="number-and-date-index-format"><a class="anchor" href="#number-and-date-index-format"></a>Number and date index format</h4>
              <div class="paragraph">
              <p>Numbers and dates now indexed as numeric fields by default.</p>
              </div>
              <div class="paragraph">
              <p>Properties of type <code>Date</code>, <code>Calendar</code> as well as <code>int</code>, <code>long</code>, <code>float</code>, <code>double</code> and their corresponding
              wrappers, are no longer indexed as strings. Instead, they are now indexed using Lucene&#8217;s appropriate
              numeric encoding.</p>
              </div>
              <div class="paragraph">
              <p>The 'id' fields are an exception to this rule: even when these are represented by a numeric type, they will still be indexed as a string keyword by default.</p>
              </div>
              <div class="admonitionblock tip">
              <table>
              <tr>
              <td class="icon">
              <i class="fa icon-tip" title="Tip"></i>
              </td>
              <td class="content">
              <code>Date</code> and <code>Calendar</code> instances are encoded as <code>long</code> value representing the number of
              milliseconds since <em>January 1, 1970, 00:00:00 GMT</em>.
              </td>
              </tr>
              </table>
              </div>
              <div class="admonitionblock tip">
              <table>
              <tr>
              <td class="icon">
              <i class="fa icon-tip" title="Tip"></i>
              </td>
              <td class="content">
              The use of <code>@NumericField</code> becomes now obsolete, unless you want to specify a custom precision
              for the numeric encoding.
              </td>
              </tr>
              </table>
              </div>
              <div class="paragraph">
              <p>You can still keep the old (string based) index format by explicitly specifying a string encoding
              field bridge. In the case of integers for example
              <code><a href="http://docs.jboss.org/hibernate/search/5.0/api/org/hibernate/search/bridge/builtin/IntegerBridge.html">org.hibernate.search.bridge.builtin.IntegerBridge</a></code>.
              Check the package <code><a href="http://docs.jboss.org/hibernate/search/5.0/api/org/hibernate/search/bridge/builtin/package-summary.html">org.hibernate.search.bridge.builtin</a></code> for
              other publicly available field bridges.</p>
              </div>
              <div class="paragraph">
              <p>For dates and calendars you can switch the indexing format via the new
              <code><a href="http://docs.jboss.org/hibernate/search/5.0/api/org/hibernate/search/annotations/EncodingType.html">EncodingType</a></code>
              enum, for example <code>@DateBridge(encoding=EncodingType.STRING)</code> resp.
              <code>@CalendarBridge(encoding=EncodingType.STRING)</code>.</p>
              </div>
              <div class="admonitionblock important">
              <table>
              <tr>
              <td class="icon">
              <i class="fa icon-important" title="Important"></i>
              </td>
              <td class="content">
              The change of encoding for number and dates is probably the most important user facing
              change. If you have any query which targets a previously string encoded field, but
              is not encoded numerically, you will need to update the query. Numeric fields must be searched with
              a <code><a href="https://lucene.apache.org/core/3_0_3/api/core/org/apache/lucene/search/NumericRangeQuery.html">NumericRangeQuery</a></code> (if you are using the Search query DSL, the right query should be created for
              you). Also make sure that all fields targeted by faceting need for now be string encoded.
              </td>
              </tr>
              </table>
              </div>
              </div>
              </div>
              <div class="sect2">
              <h3 id="misc"><a class="anchor" href="#misc"></a>Misc</h3>
              <div class="sect3">
              <h4 id="fulltextindexeventlistener-now-final"><a class="anchor" href="#fulltextindexeventlistener-now-final"></a>FullTextIndexEventListener now final</h4>
              <div class="paragraph">
              <p><code>FullTextIndexEventListener</code> is now a final class. If you are extending this class, you need to
              find an alternative approach for what you want to achieve. Maybe you can use an
              <code>EntityIndexingInterceptor</code>? If you cannot find a way to implement your use case
              - <a href="/community">contact us</a>.</p>
              </div>
              </div>
              <div class="sect3">
              <h4 id="hibernate-search-analyzers-module-removed"><a class="anchor" href="#hibernate-search-analyzers-module-removed"></a>hibernate-search-analyzers module removed</h4>
              <div class="paragraph">
              <p>The module <em>hibernate-search-analyzers</em> was dropped from the repository and will no longer be
              included in upcoming release. It is obsolete and we recommend to depend on the appropriate
              Lucene artifact directly, for example <em>org.apache.lucene:lucene-analyzers-common</em>.</p>
              </div>
              </div>
              <div class="sect3">
              <h4 id="jms-controller-api-changed"><a class="anchor" href="#jms-controller-api-changed"></a>JMS controller API changed</h4>
              <div class="paragraph">
              <p>The JMS backend was depending to <a href="/orm">Hibernate ORM</a>. This dependency was removed, so that the
              backend can be used in other (non ORM) environments as well. A consequence is that implementors of
              <code>org.hibernate.search.backend.impl.jms.AbstractJMSHibernateSearchController</code> will need to adjust to
              the new signature. This class is really considered internal. We suggest to take this class as an
              example instead of extending it.</p>
              </div>
              </div>
              <div class="sect3">
              <h4 id="serviceregistry-api-updated"><a class="anchor" href="#serviceregistry-api-updated"></a>ServiceRegistry API updated</h4>
              <div class="paragraph">
              <p>The <code>org.hibernate.search.engine.service.spi.Service</code> SPI got refactored. If you where integrating
              with the old service contract, refer to the javadoc of
              <code><a href="http://docs.jboss.org/hibernate/search/5.0/api/org/hibernate/search/engine/service/spi/ServiceManager.html">ServiceManager</a></code>,
              <code><a href="http://docs.jboss.org/hibernate/search/5.0/api/org/hibernate/search/engine/service/spi/Service.html">Service</a></code>,
              <code><a href="http://docs.jboss.org/hibernate/search/5.0/api/org/hibernate/search/engine/service/spi/Startable.html">Startable</a></code>
              and <code><a href="http://docs.jboss.org/hibernate/search/5.0/api/org/hibernate/search/engine/service/spi/Stoppable.html">Stoppable</a></code>
              for details about the new contract.</p>
              </div>
              </div>
              </div>
              </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <script>
        $(document).ready(function() {
          $('.ui.menu .ui.dropdown').dropdown({ on: 'hover' });
        });
      </script>
      <div class="ui inverted vertical footer segment print hidden">
        <div class="ui container">
          <div class="ui stackable inverted divided equal height stackable grid">
            <div class="three wide column">
              <h4 class="ui inverted header">Projects</h4>
              <div class="ui inverted link list">
                <a class="item" href="../../../../orm" title="Hibernate ORM">Hibernate ORM</a>
                <a class="item" href="../../.." title="Search">Hibernate Search</a>
                <a class="item" href="../../../../validator" title="Hibernate Validator">Hibernate Validator</a>
                <a class="item" href="../../../../ogm" title="Hibernate OGM">Hibernate OGM</a>
                <a class="item" href="../../../../tools" title="Hibernate Tools">Hibernate Tools</a>
                <a class="item" href="../../../../others" title="Other projects">Other projects</a>
              </div>
            </div>
            <div class="three wide column">
              <h4 class="ui inverted header">Follow us</h4>
              <div class="ui inverted link list">
                <a class="item" href="http://in.relation.to/" title="Blog">Blog</a>
                <a class="item" href="https://twitter.com/hibernate/" title="Twitter">Twitter</a>
                <a class="item" href="https://plus.google.com/112681342290762837955/posts" title="Google+">Google+</a>
              </div>
            </div>
            <div class="five wide column">
              <h4 class="ui inverted header">Contribute and community</h4>
              <div class="ui inverted link list">
                <a class="item" href="../../../../community" title="Community resources">Community resources</a>
                <a class="item" href="https://github.com/hibernate/">Our GitHub organization</a>
                <a class="item" href="https://hibernate.atlassian.net/" title="Submit a bug">Submit a bug</a>
                <a class="item" href="https://discourse.hibernate.org/" title="Submit a bug">Our forums</a>
                <a class="item" href="https://access.redhat.com/security/team/contact/" title="Report a security issue">Report a security issue</a>
              </div>
            </div>
            <div class="five wide column sponsor">
              <div class="logo">
                <a href="https://www.redhat.com/">
                  <img height="48" src="../../../../images/redhat.png" title="Red Hat" width="216">
                </a>
              </div>
              <div class="logo">
                <a href="https://developers.redhat.com/">
                  <img height="48" src="../../../../images/redhat-developers.png" title="Red Hat Developers" width="216">
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
      <span class="back-to-top computer only">
        <a href="javascript: void(0)">Back to top</a>
      </span>
    </div>
    <script>
     (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
     
    ga('create', 'UA-45270411-1', 'auto');
    ga('send', 'pageview');
    
    </script>
    <script>
      $(function() {
        $('#mobile-menu').sidebar('setting', {
          transition: 'push'
        });
        $('#mobile-menu').sidebar('attach events', '#mobile-menu-toggle');
      
        $('.ui.accordion').accordion();
      
        renderTabzilla("Hibernate Search", "search", true);
      
        $(window).scroll(function(e) {
          if($(this).scrollTop()>150){
            $('.back-to-top').fadeIn(1000); // Fading in the button on scroll after 150px
          }
          else {
            $('.back-to-top').fadeOut(500); // Fading out the button on scroll if less than 150px
          }
        });
      
          $('.back-to-top').click(function(e) {
            $('body, html').animate({scrollTop:0}, 800);
          });
        });
    </script>
  </body>
</html>
