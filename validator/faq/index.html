<!DOCTYPE html> <html lang="en"> <head> <title>Hibernate Validator FAQ - Hibernate Validator</title> <meta charset="utf-8"> <meta content="width=device-width, initial-scale=1.0" name="viewport"> <meta content="" name="description"> <meta content="" name="author"> <link href="http://static.jboss.org/theme/css/bootstrap-community/2.3.1.2/bootstrap-community.min.css" media="screen" rel="stylesheet"> <link href="../../stylesheets/styles.css" media="screen" rel="stylesheet"> <!--[if lt IE 9]><script src="http://static.jboss.org/theme/js/libs/html5/pre3.6/html5.min.js"></script><![endif]--> <link href="http://static.jboss.org/images/hibernate/favicon.ico" rel="shortcut icon"> <link href="http://static.jboss.org/images/hibernate/apple-touch-icon-144x144-precomposed.png" rel="apple-touch-icon-precomposed" sizes="144x144"> <link href="http://static.jboss.org/images/hibernate/apple-touch-icon-114x114-precomposed.png" rel="apple-touch-icon-precomposed" sizes="114x114"> <link href="http://static.jboss.org/images/hibernate/apple-touch-icon-72x72-precomposed.png" rel="apple-touch-icon-precomposed" sizes="72x72"> <link href="http://static.jboss.org/images/hibernate/apple-touch-icon-precomposed.png" rel="apple-touch-icon-precomposed"> <style>
      @media (min-width: 980px) {
        .banner { background-image: url(http://static.jboss.org/images/hibernate/hibernate-banner-1180px.png); height: 110px;  }
      }
      @media (max-width: 979px) {
        .banner { background-image: url(http://static.jboss.org/images/hibernate/hibernate-logo.png); background-repeat:no-repeat; height: 60px; }
      }
      @media (max-width: 650px) {
        .banner { width: 200px; margin: 0px auto; }
      }
    </style> <script src="http://static.jboss.org/theme/js/libs/jquery/jquery-1.9.1.min.js"></script> </head> <body> <ul class="visuallyhidden" id="top"> <li> <a accesskey="n" href="#nav" title="Skip to navigation">Skip to navigation</a> </li> <li> <a accesskey="c" href="#page" title="Skip to content">Skip to content</a> </li> </ul> <div class="container" id="content"> <div class="dropup"> <a class="tabnav-closed" href="https://www.jboss.org" id="tab">Red Hat</a> <script>
          window.addEventListener('load', function() { renderTabzilla("Hibernate Validator","validator") }, false);
        </script> </div> <div class="navbar navbar-inverse"> <div class="navbar-inner"> <a class="btn btn-navbar" data-target=".nav-collapse" data-toggle="collapse"> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </a> <div class="nav-collapse collapse"> <a class="nav pull-left" href="/"> <img src="http://static.jboss.org/hibernate/images/hibernate_logo_darkbkg_200px.png" width="160px"> </a> <ul class="nav pull-left"> <li class=""><a href="/orm/">ORM</a></li> <li class=""><a href="/search/">Search</a></li> <li class="active"><a href="/validator/">Validator</a></li> <li class=""><a href="/ogm/">OGM</a></li> <li class=""><a href="/tools/">Tools</a></li> <li class=""><a href="/others/">Others</a></li> </ul> <ul class="nav pull-right"> <li><a href="http://in.relation.to">Blog</a></li> <li><a href="../../community">Community</a></li> <li class="dropdown"> <a class="dropdown-toggle" data-toggle="dropdown" href="#">Follow Us <b class="caret"></b></a> <ul class="dropdown-menu projectsocialmedia"> <li><a href="https://twitter.com/hibernate"><img src="http://static.jboss.org/theme/images/common/socialmedia_icon40_twitter.png"></a></li> <li><a href="https://plus.google.com/112681342290762837955/posts"><img src="http://static.jboss.org/theme/images/common/socialmedia_icon40_googleplus.png"></a></li> </ul> </li> </ul> </div> </div> </div> <div class="row-fluid"> <div class="span2"> <div class="project-menu"> <div class="text-center project-menu-title"> <span class="icon-stack"> <i class="icon-circle icon-stack-base icon-fixed-width"></i> <i class="icon icon-light icon-fixed-width icon-check"></i> </span> </div> <ul class="nav nav-list"> <li class=""> <a href=".."> <i class="icon-fixed-width icon-home menu-icon"></i> About </a> </li> <li class=""> <a href="../downloads"> <i class="icon-fixed-width icon-cloud-download menu-icon"></i> Downloads </a> </li> <li class=""> <a href="../documentation"> <i class="icon-fixed-width icon-book menu-icon"></i> Documentation </a> </li> <li class=""> <a href="../support"> <i class="icon-fixed-width icon-user-md menu-icon"></i> Paid support </a> </li> <li class="active"> <a href="."> <i class="icon-fixed-width icon-question menu-icon"></i> FAQ </a> </li> <li class=""> <a href="../roadmap"> <i class="icon-fixed-width icon-road menu-icon"></i> Roadmap </a> </li> <li class=""> <a href="../contribute"> <i class="icon-fixed-width icon-beer menu-icon"></i> Contribute </a> </li> <li class="divider"></li> <li> <a href="https://community.jboss.org/en/hibernate/validator"> <i class="icon-fixed-width icon-edit menu-icon"></i> Wiki </a> </li> <li> <a href="https://hibernate.atlassian.net/browse/HV"> <i class="icon-fixed-width icon-exclamation-sign menu-icon"></i> Issues </a> </li> <li> <a href="https://forum.hibernate.org"> <i class="icon-fixed-width icon-comments menu-icon"></i> Forum </a> </li> <li> <a href="https://github.com/hibernate/hibernate-validator"> <i class="icon-fixed-width icon-code menu-icon"></i> Source code </a> </li> <li> <a href="https://hibernate-validator.ci.cloudbees.com/"> <i class="icon-fixed-width icon-stethoscope menu-icon"></i> CI </a> </li> </ul> </div> <hr class="divider"> <div class="license text-center"> Released under the <a href="https://raw.github.com/hibernate/hibernate-validator/master/license.txt">ASL v2</a> </div> </div> <div class="span10"> <div class="row-fluid"> <div class="visible-desktop project-title-desktop"> <div class="pull-left"> <h1>Hibernate Validator FAQ</h1> </div> </div> <div class="hidden-desktop"> <div class="project-title-phone text-center"> <div> <h1>Hibernate Validator FAQ</h1> </div> </div> </div> </div> <div id="preamble"> <div class="sectionbody"> <div class="paragraph"> <p>You&#8217;ve got burning question? We might have the answer for you.</p> </div> </div> <div id="toc" class="toc"> <div id="toctitle">Questions</div> <ul class="sectlevel1"> <li><a href="#general">General</a></li> <li> <ul class="sectlevel2"> <li><a href="#what-s-the-difference-between-hibernate-validator-3-4-and-5">What&#8217;s the difference between Hibernate Validator 3, 4 and 5?</a></li> <li><a href="#my-question-is-not-answered-where-can-i-find-help">My question is not answered. Where can I find help?</a></li> </ul> </li> <li><a href="#compatibility">Compatibility</a></li> <li> <ul class="sectlevel2"> <li><a href="#does-hibernate-validator-5-x-work-with-tomcat-6">Does Hibernate Validator 5.x work with Tomcat 6?</a></li> </ul> </li> <li><a href="#constraints">Constraints</a></li> <li> <ul class="sectlevel2"> <li><a href="#how-do-i-check-that-two-fields-of-my-bean-have-the-same-value">How do I check that two fields of my bean have the same value?</a></li> <li><a href="#how-can-i-access-the-hibernate-session-or-entitymanager-within-a-constraintvalidator">How can I access the Hibernate Session or EntityManager within a ConstraintValidator?</a></li> <li><a href="#is-it-possible-to-determine-whether-a-given-constraint-is-specified-at-field-or-property-level-using-the-metadata-api">Is it possible to determine whether a given constraint is specified at field or property level using the metadata API?</a></li> </ul> </li> <li><a href="#errors">Errors</a></li> <li> <ul class="sectlevel2"> <li><a href="#when-using-the-hv-annotation-processor-i-m-getting-a-compilation-error-like-incompatible-types-found-xy-required-xy-what-s-wrong">When using the HV annotation processor, I&#8217;m getting a compilation error like "Incompatible types, found: XY, required XY" - what&#8217;s wrong?</a></li> </ul> </li> </ul> </div> </div> <div class="sect1"> <h2 id="general"><a class="anchor" href="#general"></a>General</h2> <div class="sectionbody"> <div class="sect2"> <h3 id="what-s-the-difference-between-hibernate-validator-3-4-and-5"><a class="anchor" href="#what-s-the-difference-between-hibernate-validator-3-4-and-5"></a>What&#8217;s the difference between Hibernate Validator 3, 4 and 5?</h3> <div class="paragraph"> <p>Hibernate Validator 3.x and 4.x/5.x are different codebases.</p> </div> <div class="paragraph"> <p>Hibernate Validator is the original validation framework from the Hibernate team and is now referred to as "Legacy Hibernate Validator". Hibernate Validator 4.x is the reference implementation of Bean Validation 1.0 (<a href="http://jcp.org/en/jsr/detail?id=303">JSR 303</a>), while Hibernate Validator 5.x is the reference implementation of Bean Validation 1.1 (<a href="http://jcp.org/en/jsr/detail?id=349">JSR 349</a>). Active development happens on the 5.x codebase.</p> </div> </div> <div class="sect2"> <h3 id="my-question-is-not-answered-where-can-i-find-help"><a class="anchor" href="#my-question-is-not-answered-where-can-i-find-help"></a>My question is not answered. Where can I find help?</h3> <div class="paragraph"> <p>Check out the <a href="http://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/">reference guide</a> which covers in detail all the ins and outs of Hibernate Validator. If the guide doesn&#8217;t answer your question, come to the <a href="https://forum.hibernate.org/viewforum.php?f=9">forum</a> and you will be helped there.</p> </div> </div> </div> </div> <div class="sect1"> <h2 id="compatibility"><a class="anchor" href="#compatibility"></a>Compatibility</h2> <div class="sectionbody"> <div class="sect2"> <h3 id="does-hibernate-validator-5-x-work-with-tomcat-6"><a class="anchor" href="#does-hibernate-validator-5-x-work-with-tomcat-6"></a>Does Hibernate Validator 5.x work with Tomcat 6?</h3> <div class="paragraph"> <p>It does, if you update Tomcat&#8217;s EL libraries.</p> </div> <div class="paragraph"> <p>Hibernate Validator 5 requires the <a href="http://jcp.org/en/jsr/detail?id=341">Unified Expression Language</a> (EL) in version 2.2 or later. While Tomcat 7 provides EL 2.2 out of the box, Tomcat 6 only comes with an EL 2.1 implementation which does not work with Hibernate Validator. You will get:</p> </div> <div class="listingblock"> <div class="content"> <pre class="CodeRay"><code>NoSuchMethodError: javax.el.ExpressionFactory.newInstance()Ljavax/el/ExpressionFactory)</code></pre> </div> </div> <div class="paragraph"> <p>You can therefore either upgrade to Tomcat 7 or update the EL libs in your Tomcat 6 installation. To do the latter, replace the JAR files <code>el-api.jar</code> and and <code>jasper-el.jar</code> in <code>$CATALINE_HOME/lib</code> with an EL 2.2 implementation, e.g. from Tomcat 7.</p> </div> <div class="paragraph"> <p>Note that it is not sufficient to add an EL 2.2 implementation to your WAR and keep Tomcat&#8217;s own EL 2.1 implementation. In this case both versions will be in conflict, typically indicated by a LinkageError saying that the ExpressionFactory class has been loaded twice by different class loaders.</p> </div> </div> </div> </div> <div class="sect1"> <h2 id="constraints"><a class="anchor" href="#constraints"></a>Constraints</h2> <div class="sectionbody"> <div class="sect2"> <h3 id="how-do-i-check-that-two-fields-of-my-bean-have-the-same-value"><a class="anchor" href="#how-do-i-check-that-two-fields-of-my-bean-have-the-same-value"></a>How do I check that two fields of my bean have the same value?</h3> <div class="paragraph"> <p>By implementing a <a href="http://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-class-level-constraints">class-level constraint</a>.</p> </div> </div> <div class="sect2"> <h3 id="how-can-i-access-the-hibernate-session-or-entitymanager-within-a-constraintvalidator"><a class="anchor" href="#how-can-i-access-the-hibernate-session-or-entitymanager-within-a-constraintvalidator"></a>How can I access the Hibernate Session or EntityManager within a ConstraintValidator?</h3> <div class="paragraph"> <p>See <a href="https://community.jboss.org/docs/DOC-15315">this example</a>.</p> </div> </div> <div class="sect2"> <h3 id="is-it-possible-to-determine-whether-a-given-constraint-is-specified-at-field-or-property-level-using-the-metadata-api"><a class="anchor" href="#is-it-possible-to-determine-whether-a-given-constraint-is-specified-at-field-or-property-level-using-the-metadata-api"></a>Is it possible to determine whether a given constraint is specified at field or property level using the metadata API?</h3> <div class="paragraph"> <p>Yes.</p> </div> <div class="listingblock"> <div class="content"> <pre class="CodeRay"><code class="java language-java"><span style="color:#0a5;font-weight:bold">PropertyDescriptor</span> property =&#x000A;    validator.getConstraintsForClass(Address.class)&#x000A;               .getConstraintsForProperty(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">street1</span><span style="color:#710">&quot;</span></span>);&#x000A;&#x000A;<span style="color:#0a5;font-weight:bold">Set</span>&lt;ConstraintDescriptor&lt;?&gt;&gt; fieldConstraints =&#x000A;    property&#x000A;        .findConstraints()&#x000A;            .lookingAt(Scope.LOCAL_ELEMENT)&#x000A;            .declaredOn(<span style="color:#0a5;font-weight:bold">ElementType</span>.FIELD)&#x000A;            .getConstraintDescriptors();&#x000A;&#x000A;<span style="color:#0a5;font-weight:bold">Set</span>&lt;ConstraintDescriptor&lt;?&gt;&gt; propertyConstraints =&#x000A;    property&#x000A;        .findConstraints()&#x000A;            .lookingAt(Scope.LOCAL_ELEMENT)&#x000A;            .declaredOn(<span style="color:#0a5;font-weight:bold">ElementType</span>.METHOD)&#x000A;            .getConstraintDescriptors();</code></pre> </div> </div> <div class="literalblock"> <div class="content"> <pre>The key is the use of the +findConstraints()+ fluent API. You have three ways to restrict the metadata:</pre> </div> </div> <div class="ulist"> <ul> <li> <p><code>declaredOn(ElementType&#8230; types)</code>: defines where to look the constraints (METHOD, FIELD etc)</p> </li> <li> <p><code>lookingAt(Scope scope)</code>: defines whether to look for constraints hosted on superclass/interfaces or not</p> </li> <li> <p><code>unorderedAndMatchingGroups(Class&lt;?&gt;&#8230; groups)</code>: restrict to the constraints matching a given set of groups for this element</p> </li> </ul> </div> </div> </div> </div> <div class="sect1"> <h2 id="errors"><a class="anchor" href="#errors"></a>Errors</h2> <div class="sectionbody"> <div class="sect2"> <h3 id="when-using-the-hv-annotation-processor-i-m-getting-a-compilation-error-like-incompatible-types-found-xy-required-xy-what-s-wrong"><a class="anchor" href="#when-using-the-hv-annotation-processor-i-m-getting-a-compilation-error-like-incompatible-types-found-xy-required-xy-what-s-wrong"></a>When using the HV annotation processor, I&#8217;m getting a compilation error like "Incompatible types, found: XY, required XY" - what&#8217;s wrong?</h3> <div class="paragraph"> <p>This is caused by a <a href="http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6512707">bug</a> in the javac compiler and occurs when the compiled project contains an annotation type with an enum-typed member which has a default value. As workaround either specify the default value using its fully qualified name or add <a href="https://github.com/emmanuelbernard/APCleaner">this annotation processor</a> to your project. See also <a href="http://opensource.atlassian.com/projects/hibernate/browse/HV-498">HV-498</a> for more details.</p> </div> </div> </div> </div> </div> </div> </div> <footer class="container"> <div class="row-fluid"> <div class="span3 offset2"> <h4>Projects</h4> <ul> <li> <a href="../../orm" title="Hibernate ORM">Hibernate ORM</a> </li> <li> <a href="../../search" title="Search">Hibernate Search</a> </li> <li> <a href=".." title="Hibernate Validator">Hibernate Validator</a> </li> <li> <a href="../../ogm" title="Hibernate OGM">Hibernate OGM</a> </li> <li> <a href="../../tools" title="Hibernate Tools">Hibernate Tools</a> </li> <li> <a href="../../others" title="Other projects">Other projects</a> </li> </ul> </div> <div class="span3"> <h4>Follow Us</h4> <ul> <li> <a href="http://in.relation.to" title="Blog">Blog</a> </li> <li> <a href="https://twitter.com/hibernate/" title="Twitter">Twitter</a> </li> <li> <a href="https://plus.google.com/112681342290762837955/posts" title="Google+">Google+</a> </li> </ul> </div> <div class="span3"> <h4>Contribute and community</h4> <ul> <li> <a href="../../community" title="Community resources">Community resources</a> </li> <li> <a href="https://hibernate.atlassian.net" title="Submit a bug">Submit a bug</a> </li> </ul> </div> </div> </footer> <div class="container" id="companyfooter"> <div class="row-fluid"> <div class="span6 redhatlogo text-center"> <div id="logospacer"></div> <a href="http://www.redhat.com/"><img src="http://static.jboss.org/theme/images/common/redhat_logo.png"></a> </div> <div class="span6 redhatlogo text-center"> <div id="logospacer"></div> <a href="http://www.jboss.org/"> <img src="http://static.jboss.org/theme/images/common/jbossbadge.png"> </a> </div> </div> </div> <span class="backToTop"> <a href="#top">back to top</a> </span> <script src="../../javascripts/bootstrap-community.min.js"></script> <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount','UA-45270411-1']);
    _gaq.push(['_trackPageview']);
    (function() {
     var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
     ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
     var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script> </body> </html>