<!DOCTYPE html>
<html lang="en">
<head>
<title>FAQ - Hibernate Validator</title>
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1.0" name="viewport">
<meta content="" name="author">
<meta CONTENT="default-src &#39;none&#39;; font-src &#39;self&#39; data: https://cdn.jsdelivr.net https://static.jboss.org https://in.relation.to https://staging.in.relation.to https://fonts.gstatic.com https://fonts.googleapis.com; style-src &#39;unsafe-inline&#39; &#39;self&#39; https://cdn.jsdelivr.net https://fonts.googleapis.com; script-src &#39;self&#39; &#39;unsafe-inline&#39; https://hibernate.atlassian.net https://in.relation.to https://staging.in.relation.to https://www.redhat.com https://cdn.jsdelivr.net https://code.jquery.com www.google-analytics.com; img-src &#39;self&#39; data:  https://*.githubusercontent.com  www.google-analytics.com https://static.jboss.org https://cdn.jsdelivr.net; base-uri &#39;none&#39;; form-action &#39;none&#39;; object-src &#39;none&#39;; connect-src &#39;self&#39; https://api.github.com; frame-src https://hibernate.atlassian.net" HTTP-EQUIV="Content-Security-Policy">
<meta HTTP-EQUIV="X-XSS-Protection" content="1; mode=block">
<meta HTTP-EQUIV="X-Content-Type-Options" content="nosniff">
<meta content="Hibernate" property="og:site_name">
<meta content="https://hibernate.org/validator/faq/" property="og:url">
<meta content="FAQ - Hibernate Validator" property="og:title">
<meta content="Express validation rules in a standardized way using annotation-based constraints and benefit from transparent integration with a wide variety of frameworks.
" property="og:description">
<meta content="https://hibernate.org/images/hibernate_icon_whitebkg.svg" property="og:image">
<meta content="Express validation rules in a standardized way using annotation-based constraints and benefit from transparent integration with a wide variety of frameworks.
" name="description">
<link href="https://cdn.jsdelivr.net/npm/semantic-ui@2.2.14/dist/semantic.min.css" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/slick-carousel@1.7.1/slick/slick.css" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/slick-carousel@1.7.1/slick/slick-theme.css" rel="stylesheet">
<link href="/stylesheets/styles.css?t=1649053565" rel="stylesheet">
<!-- Defines the project favicon. Change these URLs to your specific project folder on static.jboss.org. -->
<link href="https://static.jboss.org/hibernate/images/favicon.ico" rel="shortcut icon">
<link href="https://static.jboss.org/hibernate/images/apple-touch-icon-144x144-precomposed.png" rel="apple-touch-icon-precomposed" sizes="144x144">
<link href="https://static.jboss.org/hibernate/images/apple-touch-icon-114x114-precomposed.png" rel="apple-touch-icon-precomposed" sizes="114x114">
<link href="https://static.jboss.org/hibernate/images/apple-touch-icon-72x72-precomposed.png" rel="apple-touch-icon-precomposed" sizes="72x72">
<link href="https://static.jboss.org/hibernate/images/apple-touch-icon-precomposed.png" rel="apple-touch-icon-precomposed">
<script crossorigin="anonymous" integrity="sha384-3ceskX3iaEnIogmQchP8opvBy3Mi7Ce34nWjpBIwVTHfGYWQS9jwHDVRnpKKHJg7" src="https://code.jquery.com/jquery-3.1.1.min.js" type="text/javascript"></script>
<script crossorigin="anonymous" integrity="sha384-KfrAxmzWxzKdfquWGNOhm/N9kEjIgoP2yBPMQmAjQ+Is0hp+3BlcWT6PcI7NuKEP" src="https://cdn.jsdelivr.net/npm/semantic-ui@2.2.14/dist/semantic.min.js" type="text/javascript"></script>
<script crossorigin="anonymous" integrity="sha384-8tbVdDPB3bZ0bpwXcWj84BJ4lNn6EWyBX8/Uz+tVSAKxz2u+8lYENBTZMZOF29QA" src="https://cdn.jsdelivr.net/npm/jquery-match-height@0.7.2/jquery.matchHeight.min.js" type="text/javascript"></script>

</head>
<body class="pushable">
<div class="ui vertical inverted sidebar left" id="mobile-menu">
<div class="ui vertical fluid inverted text menu accordion">
<div class="item">
<a class="title">
<i class="grid icon database"></i>
<i class="dropdown icon"></i>
<strong>ORM</strong>
</a>
<div class="content">
<div class="menu internal-links">
<a class="item" href="/orm/">
<i class="grid icon home"></i>
About
</a>
<a class="item" href="/orm/releases/">
<i class="grid icon tags"></i>
Releases
</a>
<a class="item" href="/orm/documentation/">
<i class="grid icon folder open"></i>
Documentation
</a>
<a class="item" href="/orm/books/">
<i class="grid icon book"></i>
Books
</a>
<a class="item" href="https://github.com/hibernate/hibernate-orm/wiki/Migration-Guides">
<i class="grid icon share"></i>
Migration guides
</a>
<a class="item" href="https://github.com/hibernate/hibernate-orm/wiki/Roadmap">
<i class="grid icon road"></i>
Roadmap
</a>
<a class="item" href="/orm/tooling/">
<i class="grid icon wrench"></i>
Tooling
</a>
<a class="item" href="/orm/envers/">
<i class="grid icon time"></i>
Envers
</a>
<a class="item" href="/orm/contribute/">
<i class="grid icon users"></i>
Contribute
</a>
<a class="item" href="/orm/support/">
<i class="grid icon doctor"></i>
Paid support
</a>
<a class="item" href="/orm/faq/">
<i class="grid icon help circle"></i>
FAQ
</a>
</div>
<div class="menu external-links">
<a class="item" href="https://github.com/hibernate/hibernate-orm">
<i class="grid icon code"></i>
Source code
</a>
<a class="item" href="https://hibernate.atlassian.net/browse/HHH">
<i class="grid icon bug"></i>
Issue tracker
</a>
<a class="item" href="https://access.redhat.com/security/team/contact/">
<i class="grid icon lock"></i>
Security issue
</a>
<a class="item" href="https://discourse.hibernate.org/c/hibernate-orm">
<i class="grid icon comments"></i>
Forum
</a>
<a class="item" href="https://ci.hibernate.org/">
<i class="grid icon treatment"></i>
CI
</a>
</div>
</div>
</div>

<div class="item">
<a class="title">
<i class="grid icon search"></i>
<i class="dropdown icon"></i>
<strong>Search</strong>
</a>
<div class="content">
<div class="menu internal-links">
<a class="item" href="/search/">
<i class="grid icon home"></i>
About
</a>
<a class="item" href="/search/releases/">
<i class="grid icon tags"></i>
Releases
</a>
<a class="item" href="/search/documentation/">
<i class="grid icon book"></i>
Documentation
</a>
<a class="item" href="/search/articles/">
<i class="grid icon bookmark"></i>
Articles
</a>
<a class="item" href="/search/roadmap/">
<i class="grid icon road"></i>
Roadmap
</a>
<a class="item" href="/search/contribute/">
<i class="grid icon users"></i>
Contribute
</a>
<a class="item" href="/search/tooling/">
<i class="grid icon wrench"></i>
Tooling
</a>
<a class="item" href="/search/support/">
<i class="grid icon doctor"></i>
Paid support
</a>
<a class="item" href="/search/faq/">
<i class="grid icon circle help"></i>
FAQ
</a>
</div>
<div class="menu external-links">
<a class="item" href="https://github.com/hibernate/hibernate-search">
<i class="grid icon code"></i>
Source code
</a>
<a class="item" href="https://hibernate.atlassian.net/browse/HSEARCH">
<i class="grid icon bug"></i>
Issue tracker
</a>
<a class="item" href="https://access.redhat.com/security/team/contact/">
<i class="grid icon lock"></i>
Security issue
</a>
<a class="item" href="https://discourse.hibernate.org/c/hibernate-search">
<i class="grid icon comments"></i>
Forum
</a>
<a class="item" href="https://community.jboss.org/en/hibernate/search">
<i class="grid icon edit"></i>
Wiki
</a>
<a class="item" href="https://ci.hibernate.org/job/hibernate-search/">
<i class="grid icon treatment"></i>
CI
</a>
</div>
</div>
</div>

<div class="item">
<a class="title active">
<i class="grid icon checkmark box"></i>
<i class="dropdown icon"></i>
<strong>Validator</strong>
</a>
<div class="content active">
<div class="menu internal-links">
<a class="item" href="/validator/">
<i class="grid icon home"></i>
About
</a>
<a class="item" href="/validator/releases/">
<i class="grid icon tags"></i>
Releases
</a>
<a class="item" href="/validator/documentation/">
<i class="grid icon book"></i>
Documentation
</a>
<a class="item" href="/validator/roadmap/">
<i class="grid icon road"></i>
Roadmap
</a>
<a class="item" href="/validator/contribute/">
<i class="grid icon users"></i>
Contribute
</a>
<a class="item" href="/validator/tooling/">
<i class="grid icon wrench"></i>
Tooling
</a>
<a class="item" href="/validator/support/">
<i class="grid icon doctor"></i>
Paid support
</a>
<a class="item active" href="/validator/faq/">
<i class="grid icon circle help"></i>
FAQ
</a>
</div>
<div class="menu external-links">
<a class="item" href="https://github.com/hibernate/hibernate-validator">
<i class="grid icon code"></i>
Source code
</a>
<a class="item" href="https://hibernate.atlassian.net/browse/HV">
<i class="grid icon bug"></i>
Issue tracker
</a>
<a class="item" href="https://access.redhat.com/security/team/contact/">
<i class="grid icon lock"></i>
Security issue
</a>
<a class="item" href="https://discourse.hibernate.org/c/hibernate-validator">
<i class="grid icon comments"></i>
Forum
</a>
<a class="item" href="https://ci.hibernate.org/">
<i class="grid icon treatment"></i>
CI
</a>
</div>
</div>
</div>

<div class="item">
<a class="title">
<i class="grid icon retweet"></i>
<i class="dropdown icon"></i>
<strong>Reactive</strong>
</a>
<div class="content">
<div class="menu internal-links">
<a class="item" href="/reactive/">
<i class="grid icon home"></i>
About
</a>
<a class="item" href="/reactive/releases/">
<i class="grid icon tags"></i>
Releases
</a>
<a class="item" href="/reactive/documentation/">
<i class="grid icon book"></i>
Documentation
</a>
<a class="item" href="/reactive/roadmap/">
<i class="grid icon road"></i>
Roadmap
</a>
<a class="item" href="/reactive/support/">
<i class="grid icon doctor"></i>
Paid support
</a>
<a class="item" href="/reactive/faq/">
<i class="grid icon circle help"></i>
FAQ
</a>
</div>
<div class="menu external-links">
<a class="item" href="https://github.com/hibernate/hibernate-reactive">
<i class="grid icon code"></i>
Source code
</a>
<a class="item" href="https://github.com/hibernate/hibernate-reactive/issues">
<i class="grid icon bug"></i>
Issue tracker
</a>
<a class="item" href="https://access.redhat.com/security/team/contact/">
<i class="grid icon lock"></i>
Security issue
</a>
<a class="item" href="https://discourse.hibernate.org/c/hibernate-reactive">
<i class="grid icon comments"></i>
Forum
</a>
<a class="item" href="https://github.com/hibernate/hibernate-reactive/actions">
<i class="grid icon treatment"></i>
CI
</a>
</div>
</div>
</div>

<div class="item">
<a class="title">
<i class="grid icon wrench"></i>
<i class="dropdown icon"></i>
<strong>Tools</strong>
</a>
<div class="content">
<div class="menu internal-links">
<a class="item" href="/tools/">
<i class="grid icon home"></i>
About
</a>
</div>
<div class="menu external-links">
<a class="item" href="https://tools.jboss.org/downloads/">
<i class="grid icon cloud download"></i>
Downloads
</a>
<a class="item" href="https://tools.jboss.org/documentation/">
<i class="grid icon book"></i>
Documentation
</a>
<a class="item" href="https://github.com/hibernate/hibernate-tools">
<i class="grid icon code"></i>
Source code
</a>
<a class="item" href="https://hibernate.atlassian.net/browse/HBX">
<i class="grid icon bug"></i>
Issue tracker
</a>
<a class="item" href="https://access.redhat.com/security/team/contact/">
<i class="grid icon lock"></i>
Security issue
</a>
<a class="item" href="https://discourse.hibernate.org/c/hibernate-tools">
<i class="grid icon comments"></i>
Forum
</a>
<a class="item" href="https://community.jboss.org/en/tools">
<i class="grid icon edit"></i>
Wiki
</a>
<a class="item" href="https://ci.hibernate.org/view/Tools/">
<i class="grid icon treatment"></i>
CI
</a>
</div>
</div>
</div>

<a class="item" href="/others/">
Others
</a>
<div class="item">
<a class="title">
<i class="grid icon users"></i>
<i class="dropdown icon"></i>
<strong>Community</strong>
</a>
<div class="content">
<div class="menu external-links">
<a class="item" href="/community/">
<i class="grid icon users"></i>
Community
</a>
<a class="item" href="/community/contributors/orm/">
<i class="grid icon database"></i>
Contributors to ORM
</a>
<a class="item" href="/community/contributors/search/">
<i class="grid icon search"></i>
Contributors to Search
</a>
<a class="item" href="/community/contributors/validator/">
<i class="grid icon checkmark box"></i>
Contributors to Validator
</a>
<a class="item" href="/community/contributors/ogm/">
<i class="grid icon sitemap"></i>
Contributors to OGM
</a>
<a class="item" href="/community/corporate-contributors/">
<i class="grid icon building outline"></i>
Corporate contributors
</a>
<a class="item" href="/community/compatibility-policy/">
<i class="grid icon history"></i>
Compatibility policy
</a>
<a class="item" href="/community/license/">
<i class="grid icon legal"></i>
Licenses
</a>
<a class="item" href="/community/keys/">
<i class="grid icon key"></i>
Keys
</a>
<a class="item" href="/community/contribute/guidelines/">
Contribute - Guidelines
</a>
<a class="item" href="/community/contribute/intellij-idea/">
Contribute - Set up IntelliJ IDEA
</a>
<a class="item" href="/community/contribute/eclipse-ide/">
Contribute - Set up Eclipse IDE
</a>
<a class="item" href="/community/contribute/build-hibernate-orm/">
Contribute - Build Hibernate ORM
</a>
</div>
</div>
</div>

<a class="item" href="https://in.relation.to/">
Blog
</a>
<a class="item" href="https://discourse.hibernate.org/">
Forums
</a>
<a class="item" href="https://twitter.com/hibernate/">
<i class="icon twitter"></i>
Follow us
</a>
</div>
</div>

<div class="pusher">
<div class="mobile-menu-button-bar mobile only print hidden">
<a class="item" id="mobile-menu-toggle">
<i class="sidebar icon"></i>
Menu
</a>
</div>
<!-- begin accesibility skip to top -->
<ul class="sr-only">
<li>
<a accesskey="n" href="#nav" title="Skip to navigation">Skip to navigation</a>
</li>
<li>
<a accesskey="c" href="#content" title="Skip to content">Skip to content</a>
</li>
</ul>
<div class="ui container banner">
<div class="logo">
<a href="/">
<img alt="Hibernate" height="53" src="/images/hibernate-logo.svg" width="200">
</a>
</div>
<div class="clearfix"></div>
<div class="ui stackable menu mobile hidden print hidden" id="nav">
<a class="item" href="/orm/">ORM</a>
<a class="item" href="/search/">Search</a>
<a class="item active" href="/validator/">Validator</a>
<a class="item" href="/reactive/">Reactive</a>
<a class="item" href="/tools/">Tools</a>
<a class="item" href="/others/">Others</a>
<div class="right menu">
<a class="item" href="https://in.relation.to/">Blog</a>
<a class="item" href="https://discourse.hibernate.org/">Forums</a>
<a class="item" href="/community/">Community</a>
<a class="item" href="https://twitter.com/hibernate/">
<i class="twitter icon"></i>
Follow us
</a>
</div>
</div>

</div>

<script>
var displayed_series = [];
displayed_series.push('8.0');
displayed_series.push('7.0');
displayed_series.push('6.2');
displayed_series.push('6.0');
</script>
<div class="jumbotron small">
<div class="ui container">
<div class="ui grid stackable">
<div class="column row">
<div class="column twelve wide middle aligned">
<h1>
<span>
Hibernate Validator
</span>
</h1>
<h2>
<span>
FAQ
</span>
</h2>
</div>
<div class="column four wide middle aligned">

</div>
</div>
</div>
</div>
</div>

<div class="heroes">

</div>
<div class="ui container page-content">
<div class="ui stackable grid">
<div class="column three wide computer only print hidden">
<div class="ui fluid vertical menu">
<a class="item" href="/validator/">
<i class="grid icon home"></i>
About
</a>
<div class="ui dropdown link item">
Releases
<i class="icon dropdown"></i>
<div class="menu">
<a class="item" href="/validator/releases/">
Overview
</a>
<a class="item" href="/validator/releases/8.0/">
8.0
&nbsp;&nbsp;
<span class="ui label orange">development</span>
</a>
<a class="item" href="/validator/releases/7.0/">
7.0
&nbsp;&nbsp;
<span class="ui label green">latest stable</span>
</a>
<a class="item" href="/validator/releases/6.2/">
6.2
</a>
<a class="item" href="/validator/releases/6.0/">
6.0
</a>
</div>
</div>
<a class="item" href="/validator/documentation/">
<i class="grid icon book"></i>
Documentation
</a>
<a class="item" href="/validator/roadmap/">
<i class="grid icon road"></i>
Roadmap
</a>
<a class="item" href="/validator/contribute/">
<i class="grid icon users"></i>
Contribute
</a>
<a class="item" href="/validator/tooling/">
<i class="grid icon wrench"></i>
Tooling
</a>
<a class="item" href="/validator/support/">
<i class="grid icon doctor"></i>
Paid support
</a>
<a class="item selected" href="/validator/faq/">
<i class="grid icon circle help"></i>
FAQ
</a>
</div>
<div class="ui fluid vertical menu">
<a class="item" href="https://github.com/hibernate/hibernate-validator">
<i class="grid icon code"></i>
Source code
</a>
<a class="item" href="https://hibernate.atlassian.net/browse/HV">
<i class="grid icon bug"></i>
Issue tracker
</a>
<a class="item" href="https://access.redhat.com/security/team/contact/">
<i class="grid icon lock"></i>
Security issue
</a>
<a class="item" href="https://discourse.hibernate.org/c/hibernate-validator">
<i class="grid icon comments"></i>
Forum
</a>
<a class="item" href="https://ci.hibernate.org/">
<i class="grid icon treatment"></i>
CI
</a>
</div>
<hr>
<div class="license">
Released under the
<a href="https://raw.github.com/hibernate/hibernate-validator/master/license.txt">ASL v2</a>
</div>

</div>
<div class="column thirteen wide computer sixteen wide mobile">
<div class="content" id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>You&#8217;ve got a question burning you? We might have the answer for you.</p>
</div>
</div>
<div id="toc" class="toc">
<div id="toctitle">Questions</div>
<ul class="sectlevel1">
<li><a href="#general">General</a>
<ul class="sectlevel2">
<li><a href="#whats-the-difference-between-hibernate-validator-3-4-and-5">What&#8217;s the difference between Hibernate Validator 3, 4 and 5?</a></li>
<li><a href="#why-is-my-jpa-entity-not-validated-when-i-call-persist">Why is my JPA entity not validated when I call persist()?</a></li>
<li><a href="#my-question-is-not-answered-where-can-i-find-help">My question is not answered. Where can I find help?</a></li>
</ul>
</li>
<li><a href="#compatibility">Compatibility</a>
<ul class="sectlevel2">
<li><a href="#does-hibernate-validator-5-x-work-with-tomcat-6">Does Hibernate Validator 5.x work with Tomcat 6?</a></li>
</ul>
</li>
<li><a href="#constraints">Constraints</a>
<ul class="sectlevel2">
<li><a href="#how-do-i-check-that-two-fields-of-my-bean-have-the-same-value">How do I check that two fields of my bean have the same value?</a></li>
<li><a href="#how-can-i-access-the-hibernate-session-or-entitymanager-within-a-constraintvalidator">How can I access the Hibernate Session or EntityManager within a ConstraintValidator?</a></li>
<li><a href="#can-i-declare-constraints-dynamically-at-runtime">Can I declare constraints dynamically at runtime?</a></li>
<li><a href="#how-can-i-find-out-which-constraints-are-declared-for-a-given-class-or-property">How can I find out which constraints are declared for a given class or property?</a></li>
<li><a href="#is-it-possible-to-determine-whether-a-given-constraint-is-specified-at-field-or-property-level-using-the-metadata-api">Is it possible to determine whether a given constraint is specified at field or property level using the metadata API?</a></li>
</ul>
</li>
<li><a href="#errors">Errors</a>
<ul class="sectlevel2">
<li><a href="#when-using-the-hv-annotation-processor-im-getting-a-compilation-error-like-incompatible-types-found-xy-required-xy-whats-wrong">When using the HV annotation processor, I&#8217;m getting a compilation error like "Incompatible types, found: XY, required XY" - what&#8217;s wrong?</a></li>
<li><a href="#how-can-i-avoid-the-error-hv000150-the-constraint-javax-validation-constraints-decimalmin-defines-multiple-validators-for-the-type-interface-javax-money-monetaryamount-only-one-is-allowed">How can I avoid the error "HV000150: The constraint 'javax.validation.constraints.DecimalMin' defines multiple validators for the type 'interface javax.money.MonetaryAmount'. Only one is allowed."</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="sect1">
<h2 id="general"><a class="anchor" href="#general"></a>General</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="whats-the-difference-between-hibernate-validator-3-4-and-5"><a class="anchor" href="#whats-the-difference-between-hibernate-validator-3-4-and-5"></a>What&#8217;s the difference between Hibernate Validator 3, 4 and 5?</h3>
<div class="paragraph">
<p>Hibernate Validator 3.x and 4.x/5.x are different codebases.</p>
</div>
<div class="paragraph">
<p>Hibernate Validator is the original validation framework from the Hibernate team and is now referred to as "Legacy Hibernate Validator". Hibernate Validator 4.x is the reference implementation of Bean Validation 1.0 (<a href="http://jcp.org/en/jsr/detail?id=303">JSR 303</a>), while Hibernate Validator 5.x is the reference implementation of Bean Validation 1.1 (<a href="http://jcp.org/en/jsr/detail?id=349">JSR 349</a>). Active development happens on the 5.x codebase.</p>
</div>
</div>
<div class="sect2">
<h3 id="why-is-my-jpa-entity-not-validated-when-i-call-persist"><a class="anchor" href="#why-is-my-jpa-entity-not-validated-when-i-call-persist"></a>Why is my JPA entity not validated when I call persist()?</h3>
<div class="paragraph">
<p>The short answer is call <code>EntityManager#flush()</code> if you want the validation to be triggered.</p>
</div>
<div class="paragraph">
<p>Hibernate ORM and a few other ORMs try to batch as many operations as possible when
accessing the database. It is likely that the actual entity "persist" operation only happens
when you call <code>flush()</code> or when the transaction commits.</p>
</div>
<div class="paragraph">
<p>Also, knowing which entity is about to be persisted depends on your cascading strategy and the state
of your object graph. Flush is when Hibernate ORM identifies all the entities that have been changed
and require database actions (see also <a href="https://hibernate.atlassian.net/browse/HHH-8028">HHH-8028</a>).</p>
</div>
</div>
<div class="sect2">
<h3 id="my-question-is-not-answered-where-can-i-find-help"><a class="anchor" href="#my-question-is-not-answered-where-can-i-find-help"></a>My question is not answered. Where can I find help?</h3>
<div class="paragraph">
<p>Check out the <a href="http://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/">reference guide</a> which covers in detail all the ins and outs of Hibernate Validator. If the guide doesn&#8217;t answer your question, come to the <a href="https://discourse.hibernate.org/c/hibernate-validator">forum</a> and you will be helped there.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="compatibility"><a class="anchor" href="#compatibility"></a>Compatibility</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="does-hibernate-validator-5-x-work-with-tomcat-6"><a class="anchor" href="#does-hibernate-validator-5-x-work-with-tomcat-6"></a>Does Hibernate Validator 5.x work with Tomcat 6?</h3>
<div class="paragraph">
<p>It does, if you update Tomcat&#8217;s EL libraries.</p>
</div>
<div class="paragraph">
<p>Hibernate Validator 5 requires the <a href="http://jcp.org/en/jsr/detail?id=341">Unified Expression Language</a> (EL) in version 2.2 or later. While Tomcat 7 provides EL 2.2 out of the box, Tomcat 6 only comes with an EL 2.1 implementation which does not work with Hibernate Validator. You will get:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>NoSuchMethodError: javax.el.ExpressionFactory.newInstance()Ljavax/el/ExpressionFactory)</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can therefore either upgrade to Tomcat 7 or update the EL libs in your Tomcat 6 installation. To do the latter, replace the JAR files el-api.jar and and jasper-el.jar in $CATALINE_HOME/lib with an EL 2.2 implementation, e.g. from Tomcat 7.</p>
</div>
<div class="paragraph">
<p>Note that it is not sufficient to add an EL 2.2 implementation to your WAR and keep Tomcat&#8217;s own EL 2.1 implementation. In this case both versions will be in conflict, typically indicated by a LinkageError saying that the ExpressionFactory class has been loaded twice by different class loaders.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="constraints"><a class="anchor" href="#constraints"></a>Constraints</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="how-do-i-check-that-two-fields-of-my-bean-have-the-same-value"><a class="anchor" href="#how-do-i-check-that-two-fields-of-my-bean-have-the-same-value"></a>How do I check that two fields of my bean have the same value?</h3>
<div class="paragraph">
<p>By implementing a <a href="http://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-class-level-constraints">class-level constraint</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="how-can-i-access-the-hibernate-session-or-entitymanager-within-a-constraintvalidator"><a class="anchor" href="#how-can-i-access-the-hibernate-session-or-entitymanager-within-a-constraintvalidator"></a>How can I access the Hibernate Session or EntityManager within a ConstraintValidator?</h3>
<div class="paragraph">
<p>See <a href="https://developer.jboss.org/wiki/AccessingTheHibernateSessionWithinAConstraintValidator">this example</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="can-i-declare-constraints-dynamically-at-runtime"><a class="anchor" href="#can-i-declare-constraints-dynamically-at-runtime"></a>Can I declare constraints dynamically at runtime?</h3>
<div class="paragraph">
<p>Yes, using the <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-programmatic-api">API for programmatic constraint declaration</a>.</p>
</div>
<div class="paragraph">
<p>This Hibernate Validator specific API is useful, if for instance you need to adapt constraint parameters based on some runtime configuration or
when dealing with multi-tenancy, where different constraints should be applied to given types based on a specific tenant.</p>
</div>
<div class="paragraph">
<p>To use the API, obtain a ConstraintMapping from HibernateValidatorConfiguration, configure it as needed and pass it back to the configuration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">HibernateValidatorConfiguration configuration = Validation&#x000A;        .byProvider( HibernateValidator.class )&#x000A;        .configure();&#x000A;&#x000A;ConstraintMapping constraintMapping = configuration.createConstraintMapping();&#x000A;&#x000A;constraintMapping&#x000A;    .type( Address.class )&#x000A;        .property( <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">street1</span><span style="color:#710">&quot;</span></span>, FIELD )&#x000A;            .constraint( <span style="color:#080;font-weight:bold">new</span> NotNullDef() )&#x000A;        .property( <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">zipCode</span><span style="color:#710">&quot;</span></span>, FIELD )&#x000A;            .ignoreAnnotations()&#x000A;            .constraint( <span style="color:#080;font-weight:bold">new</span> NotNullDef() )&#x000A;            .constraint( <span style="color:#080;font-weight:bold">new</span> SizeDef().min( <span style="color:#00D">2</span> ).max( <span style="color:#00D">6</span> ) );&#x000A;&#x000A;<span style="color:#0a8;font-weight:bold">Validator</span> validator = configuration.addMapping( constraintMapping )&#x000A;        .buildValidatorFactory()&#x000A;        .getValidator();</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="how-can-i-find-out-which-constraints-are-declared-for-a-given-class-or-property"><a class="anchor" href="#how-can-i-find-out-which-constraints-are-declared-for-a-given-class-or-property"></a>How can I find out which constraints are declared for a given class or property?</h3>
<div class="paragraph">
<p>You can do so using the <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#validator-metadata-api">constraint metadata API</a>.</p>
</div>
<div class="paragraph">
<p>With help of the metadata API you could e.g. implement a solution which exports constraint information via REST, allowing for client-side validation using JavaScript.
The next question shows an example for using that API.</p>
</div>
</div>
<div class="sect2">
<h3 id="is-it-possible-to-determine-whether-a-given-constraint-is-specified-at-field-or-property-level-using-the-metadata-api"><a class="anchor" href="#is-it-possible-to-determine-whether-a-given-constraint-is-specified-at-field-or-property-level-using-the-metadata-api"></a>Is it possible to determine whether a given constraint is specified at field or property level using the metadata API?</h3>
<div class="paragraph">
<p>Yes.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span style="color:#0a8;font-weight:bold">PropertyDescriptor</span> property =&#x000A;    validator.getConstraintsForClass(Address.class)&#x000A;               .getConstraintsForProperty(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">street1</span><span style="color:#710">&quot;</span></span>);&#x000A;&#x000A;<span style="color:#0a8;font-weight:bold">Set</span>&lt;ConstraintDescriptor&lt;?&gt;&gt; fieldConstraints =&#x000A;    property&#x000A;        .findConstraints()&#x000A;            .lookingAt(Scope.LOCAL_ELEMENT)&#x000A;            .declaredOn(<span style="color:#0a8;font-weight:bold">ElementType</span>.FIELD)&#x000A;            .getConstraintDescriptors();&#x000A;&#x000A;<span style="color:#0a8;font-weight:bold">Set</span>&lt;ConstraintDescriptor&lt;?&gt;&gt; propertyConstraints =&#x000A;    property&#x000A;        .findConstraints()&#x000A;            .lookingAt(Scope.LOCAL_ELEMENT)&#x000A;            .declaredOn(<span style="color:#0a8;font-weight:bold">ElementType</span>.METHOD)&#x000A;            .getConstraintDescriptors();</code></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>The key is the use of the +findConstraints()+ fluent API. You have three ways to restrict the metadata:</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>declaredOn(ElementType... types): defines where to look the constraints (METHOD, FIELD etc)</p>
</li>
<li>
<p>lookingAt(Scope scope): defines whether to look for constraints hosted on superclass/interfaces or not</p>
</li>
<li>
<p>unorderedAndMatchingGroups(Class&lt;?&gt;... groups): restrict to the constraints matching a given set of groups for this element</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="errors"><a class="anchor" href="#errors"></a>Errors</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="when-using-the-hv-annotation-processor-im-getting-a-compilation-error-like-incompatible-types-found-xy-required-xy-whats-wrong"><a class="anchor" href="#when-using-the-hv-annotation-processor-im-getting-a-compilation-error-like-incompatible-types-found-xy-required-xy-whats-wrong"></a>When using the HV annotation processor, I&#8217;m getting a compilation error like "Incompatible types, found: XY, required XY" - what&#8217;s wrong?</h3>
<div class="paragraph">
<p>This is caused by a <a href="http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6512707">bug</a> in the javac compiler and occurs when the compiled project contains an annotation type with an enum-typed member which has a default value. As workaround either specify the default value using its fully qualified name or add <a href="https://github.com/emmanuelbernard/APCleaner">this annotation processor</a> to your project. See also <a href="http://opensource.atlassian.com/projects/hibernate/browse/HV-498">HV-498</a> for more details.</p>
</div>
</div>
<div class="sect2">
<h3 id="how-can-i-avoid-the-error-hv000150-the-constraint-javax-validation-constraints-decimalmin-defines-multiple-validators-for-the-type-interface-javax-money-monetaryamount-only-one-is-allowed"><a class="anchor" href="#how-can-i-avoid-the-error-hv000150-the-constraint-javax-validation-constraints-decimalmin-defines-multiple-validators-for-the-type-interface-javax-money-monetaryamount-only-one-is-allowed"></a>How can I avoid the error "HV000150: The constraint 'javax.validation.constraints.DecimalMin' defines multiple validators for the type 'interface javax.money.MonetaryAmount'. Only one is allowed."</h3>
<div class="paragraph">
<p>You&#8217;ll get this error with Hibernate Validator 5.4 and later if you have the dependency <em>org.zalando:money-validation</em> on your classpath.
The <em>money-validation</em> project has been contributed to the Hibernate Validator code base,
i.e. Hibernate Validator allows to validate <code>MonetaryAmount</code> out of the box.
Remove the <em>money-validation</em> dependency from your classpath to avoid the conflict with the constraint validators now built into Hibernate Validator.</p>
</div>
</div>
</div>
</div>
</div>

</div>
</div>
</div>
<script>
  $(document).ready(function() {
    $('.ui.menu .ui.dropdown').dropdown({ on: 'hover' });
  });
</script>

<div class="ui inverted vertical footer segment print hidden">
<div class="ui container">
<div class="ui stackable inverted divided equal height stackable grid">
<div class="three wide column">
<h4 class="ui inverted header">Projects</h4>
<div class="ui inverted link list">
<a class="item" href="../../orm" title="Hibernate ORM">Hibernate ORM</a>
<a class="item" href="../../search" title="Hibernate Search">Hibernate Search</a>
<a class="item" href=".." title="Hibernate Validator">Hibernate Validator</a>
<a class="item" href="../../reactive" title="Hibernate Reactive">Hibernate Reactive</a>
<a class="item" href="../../tools" title="Hibernate Tools">Hibernate Tools</a>
<a class="item" href="../../others" title="Other projects">Other projects</a>
</div>
</div>
<div class="three wide column">
<h4 class="ui inverted header">Follow us</h4>
<div class="ui inverted link list">
<a class="item" href="https://in.relation.to/" title="Blog">Blog</a>
<a class="item" href="https://twitter.com/hibernate/" title="Twitter">Twitter</a>
</div>
</div>
<div class="five wide column">
<h4 class="ui inverted header">Contribute and community</h4>
<div class="ui inverted link list">
<a class="item" href="../../community" title="Community resources">Community resources</a>
<a class="item" href="https://github.com/hibernate/">Our GitHub organization</a>
<a class="item" href="https://hibernate.atlassian.net/" title="Submit a bug">Submit a bug</a>
<a class="item" href="https://discourse.hibernate.org/" title="Submit a bug">Our forums</a>
<a class="item" href="https://access.redhat.com/security/team/contact/" title="Report a security issue">Report a security issue</a>
<a class="item" href="../../community/license" title="License">License</a>
</div>
</div>
<div class="five wide column sponsor">
<div class="logo">
<a href="https://www.redhat.com/">
<img src="/images/sponsored-by-redhat.svg" title="Red Hat">
</a>
</div>
</div>
</div>
</div>
</div>

<span class="back-to-top computer only">
<a href="javascript: void(0)">Back to top</a>
</span>
</div>
<script>
 (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
 
ga('create', 'UA-45270411-1', 'auto');
ga('send', 'pageview');

</script>

<script>
  $(function() {
    $('#mobile-menu').sidebar('setting', {
      transition: 'push'
    });
    $('#mobile-menu').sidebar('attach events', '#mobile-menu-toggle');
  
    $('.ui.accordion').accordion();
  
    $(window).scroll(function(e) {
      if($(this).scrollTop()>150){
        $('.back-to-top').fadeIn(1000); // Fading in the button on scroll after 150px
      }
      else {
        $('.back-to-top').fadeOut(500); // Fading out the button on scroll if less than 150px
      }
    });
  
      $('.back-to-top').click(function(e) {
        $('body, html').animate({scrollTop:0}, 800);
      });
    });
</script>
</body>
</html>
